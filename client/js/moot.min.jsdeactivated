/*

 Moot v1.9.7 (beta) | Feb 19, 2014

 "Forums and Commenting re-imagined"

 https://moot.it | (c) 2014 Moot Inc

 */!function(){function e(e){if("undefined"!=typeof jQuery){var t=jQuery().jquery.split(".");return Number(t[0])>1||Number(t[1])>6?e(jQuery):jQuery(".moot").text("Moot requires jQuery 1.7+")}var o=document.createElement("script");o.onload=o.onreadystatechange=function(){var t=o.readyState;(void 0===t||/complete|loaded/.test(t))&&e(jQuery)},o.src="//code.jquery.com/jquery-1.11.0.min.js";var n=document.getElementsByTagName("head")[0];n.insertBefore(o,n.firstChild)}document.write("<style>a.moot { display: none }</style>"),e(function(e){e("link[href*='moot.css']")[0]||e("head").append(e("<link/>",{href:"//cdn.moot.it/1.9.7/moot.css",rel:"stylesheet",type:"text/css"})),!function(e,t){"use strict";function o(e,o){var n={},a=[].slice;return e=e||{},t.extend(e,{on:function(o,a,i){if(o=o.split(" "),t.isFunction(a)&&(i=a,a=0),t.isFunction(i)){for(var r,l=0,s=o.length;s>l;l++)r=t.trim(o[l]),(n[r]=n[r]||[]).push(i),(s>1||"*"==o)&&(i.typed=!0);a&&(i.typed?i("inline",a):i(a))}return e},off:function(o,a){if("*"==o)return n={};o=o.split(" ");for(var i,r=0;o.length>r;r++)if(i=t.trim(o[r]),a){for(var l=n[i]||[],s=-1,c=0,d=l.length;d>c;c++)if(l[c]===a||l[c].listener===a){s=c;break}s>=0&&l.splice(s,1)}else n[i]=[];return e},one:function(o,n){function a(){e.off(o,n),n.apply(e,arguments)}return t.isFunction(n)&&(a.listener=n,e.on(o,a)),e},emit:function(t){var o=a.call(arguments,1),i=n[t]||[],r=n["*"];r&&(i=i.concat(r));for(var l,s,c=0,d=i.length;d>c;++c)if(l=i[c],l&&(s=l.typed?[t].concat(o):o,l.apply(e,s)===!1))return e;return e}}),t.each(o||[],function(o,n){e[n]=function(o){return t.isFunction(o)?e.on(n,o):e.emit.apply(e,[n].concat(a.call(arguments)))}}),e}function n(n){function a(e,o,n){var a=new FormData;e.params[0],e.transport="ajax",t.each(o,function(e,t){a.append(t.altname||t.name,t)}),a.append("jsonrpc",JSON.stringify(e));var r=new XMLHttpRequest;r.onload=function(e){i(JSON.parse(e.target.response))},r.onprogress=function(e){n.progress(e)},r.open("POST",m),r.send(a)}function i(e){if(!e)return s.emit("heartbeat");if("string"==typeof e&&(e=JSON.parse(e)),e.params&&"ping"==e.params[0])return s.emit("heartbeat");if(t.isArray(e))return t.each(e,function(e,t){i(t)});s.emit("receive",e),e.session&&(c=e.session,t.cookie2(x,c.sessionId)),n.pollUrl=n.pollUrl||e.pollUrl,l||(s.time_offset=new Date-1e3*e.server_time,e.result&&s.ready(e.result),l=!0);var o=p[e.id],a=void 0!==e.error;o?(o.always(e.result,e.error),a||o.done(e.result)):"emit"==e.method&&d.emit.apply(null,e.params),a&&(o&&o.fail(e.error,e.data),s.error(e.error,e.data))}if(t.isFunction(n))return T.push(n);var r,l,s=o(this,["ready","error","close","reconnect","destroy"]),c={sessionId:t.cookie2(x)},d=o({}),u=0,p={};"string"==typeof n&&(n={url:n}),s.conf=n=t.extend({transports:"upgrade,xdomain",pollUrl:null,secure:!0},n);var m=n.url;if("string"==typeof m&&(m=m.split(":"),m={hostname:m[1].slice(2),port:m[2]}),443==m.port&&(m.port=80),m="http"+(n.secure?"s":"")+"://"+m.hostname+(m.port&&80!=m.port?":"+m.port:""),t.each(n.transports.split(","),function(e,t){var o=_[t];!r&&o&&o.supported&&(r=new o(m,s,i),s.transport=t)}),!r)throw Error("json-rpc: no support for "+n.transports);s.event=function(e,t){return d.on(e,t),s},s.session=function(){return t.extend({},c)},s.reload=function(){return u=0,r.destroy(),r.ping(),s},s.poll=function(){var e=n.pollUrl;e&&(-1==e.indexOf("://")&&(e=m+e),r.poll&&r.poll(e,t.extend({},c,{transport:r.name})))},s.log=function(e,o){var n={message:e,data:t.extend(o,{url:location.href,ua:navigator.userAgent})};t.post(m,JSON.stringify({method:"log",jsonrpc:"2.1.0",params:[n],session:c}),t.noop,"json")},window.mootlog=s.log,s.call=function(n){if(s.is_closed||s.is_destroyed)throw Error("connection "+(s.is_closed?"closed":"destroyed"));var i,d=[].slice.call(arguments),m=d.slice(-1)[0],f={method:n,params:d.slice(1,-1)};if(t.isFunction(m)?(i=o({},["done","fail","always","progress"]).done(m),f.id="#"+ ++u,p[f.id]=i):(void 0!==m&&(f.params=d.slice(1)),m=void 0),f.params.length||delete f.params,f.session=c,l||(f.jsonrpc="2.1.0"),f.transport=s.transport,s.emit("send",n,f.params,i),!e&&window.File&&f.params){var g=f.params[0],h=g&&g.files;if(h)return delete g.files,a(f,h,i),i}return r.send(JSON.stringify(f)),i},t.each(T,function(){this.call(s,r)});var f=e;e||t(window).load(function(){f=!0}),s.destroy(function(){s.is_destroyed=!0,r.destroy()}).error(function(e){"error_invalid_channel"==e&&(delete c.channelId,s.inited=!1,s.reconnect())}).close(function(){l=!1}).ready(function(){t.isFunction(r.poll)&&(e?s.poll():setTimeout(s.poll,f?1e3:3e3))})}function a(e,t,o){e/=o?D:2,e+=~~(e/t);for(var n=$-A,a=~~(n*q/2),i=0;e>a;i+=$)e=~~(e/n);var r=($-A+1)*e,l=e+S;return i+~~(r/l)}function i(e,t){for(var o=1114112,n=0,a=e.length;a>n;++n){var i=e[n];i>=t&&o>i&&(o=i)}return o}function r(e){return e+(26>e?97:22)}function l(e,t){return t+A>=e?A:e>=t+q?q:e-t}function s(e,t){for(var o=[],n=$,a=t;;n+=$){var i=l(n,e);if(i>a){o.push(r(a));break}o.push(r(i+(a-i)%($-i))),a=~~((a-i)/($-i))}return o}function c(e){e=t.map(e.split(""),function(e){return e.charCodeAt(0)});for(var o=[],n=[],r=0,l=e.length;l>r;++r){var c=e[r];128>c?o.push(c):n.push(c)}var d,u;d=u=o.length,d&&o.push(45);for(var p=O,m=L,f=0,l=e.length;l>u;++p,++f){var g=i(n,p);f+=(g-p)*(u+1),p=g;for(var r=0;l>r;++r){var c=e[r];p>c?++f:c==p&&(o=o.concat(s(m,f)),m=a(f,u+1,d==u),f=0,u++)}}return String.fromCharCode.apply(String,o)}function d(e,o){return t.isFunction(e)&&e.apply(o,[].slice.call(arguments,2)),o}function u(e,t){e=e.replace("/moot.it/","/api.moot.it/").replace("/i/","/");var o=e.split("/");o[o.length-1]=o.slice(-1)[0].replace(":","#"),e=o.join("/");var n=e.split("#");n[1]&&(e=n[0]+"#"+p(n[1])),e=H(e),"/"==e.href.slice(-1)&&(e.href=e.href.slice(0,-1),e.pathname=e.pathname.slice(0,-1));var a=e.href,i=a.split("/"),r="//"==a.slice(0,2)||a.indexOf("://")>0?a.slice(8).indexOf("/")+8:a.indexOf("/");return e.path=a.slice(r),e.host=i[2],t&&!/moot.it/.test(e.host)&&(t=H(t),e.orighost=e.host,e.host=t.hostname+(t.port?":"+t.port:""),e.protocol=t.protocol,e.hostname=t.hostname,e.port=t.port),e}function p(e){e=t.trim(e.toLowerCase().slice(0,10*I)),e=e.replace(/&quest;/g,"");var o={a:/[áàâãªäå]/g,o:/[òóôõºöø]/g,e:/[éèê]/g,i:/[íìîı]/g,u:/[úùûü]/g,c:/[ç]/g,n:/[ñ]/g,"-":/[_\s]+/g};return t.each(o,function(t,o){e=e.replace(o,t)}),e=c(e).slice(0,10*I),e=e.replace(/[^a-z0-9-]/g,"").replace(/^-|-$/g,"").replace(/\-{2,}/g,"-"),e||(""+Math.random()).slice(10)}function m(e,o){if(void 0===e||"number"==typeof e)return F;if(t.isFunction(e)&&(o=e,e="ready"),"string"==typeof e)if(-1!=e.indexOf("/"))e={url:e};else if(t.isFunction(o))return(E[e]=E[e]||[]).push(o);if(t.isPlainObject(e)){e=t.extend({api_url:"https://api.moot.it"},e),"object"!=typeof console&&(e.debug=0);var n=new f(e);return t.isFunction(o)&&n.on("ready",o),t.each(E,function(e,o){t.each(o,function(){n.on(e,this)})}),n.emit("before:init",n),F=n,n}}function f(e){function a(t){var o="reload"==t,n={version:r.version,path:r.page.path,currentForum:r.name,embedUrl:e.embedUrl||e.embedurl,pageLocation:e.pageUrl,expand_all:!e.show_title,reload:o},a=e.api||e.sso;if(a&&a.key){n.api=a,r.is_signed=!0;try{var l=atob(a.message),s=JSON.parse(l);r.is_sso=!!s.user}catch(c){return console.error("Invalid Moot SSO: "+l,c)}}e.sso&&(r.is_sso=!0),i.call("init",n,function(e){r.emit(t,e)}).fail(function(e){r.emit("error",e[0])})}var i,r=o(this),l=u(e.url,e.api_url),s=l.pathname.split("/");e.url=l,e.api_url=l.protocol+"//"+l.host,t.extend(r,{version:"1.9.7",channel:null,name:s[1],path:"/"+s[1],is_commenting:!!l.hash,is_forum:!l.hash&&3>s.length,is_threaded:!l.hash&&s.length>2,is_signed:!1,is_sso:!1,conf:function(){return e},load:function(t,o){if(r.is_stub)throw Error("Forum not created");r.is_threaded&&!t.split("#")[1]&&(t=e.url.path);var n=new y(r,t,i);r.emit("before:load",n),i.call("moots",{path:n.path,expand_all:!e.show_title},function(e){n.emit("load",e),r.one("load",o).emit("load",n)})},search:function(e,t){return r.load("/?"+e,t)},create:function(o,n){var a,l=m.fixTitle(o.title);if(!l)throw Error("title:missing");if(l.length>30*I)throw Error("title:too_long");if(!r.user.is_logged)throw Error("user:not_logged");if(t.each(r.page,function(e,t){l==t.seed.title&&(a=!0)}),a)throw Error("duplicate");t.extend(o,{title:l,key:p(l),body:m.fixBody(o.body,!0),pageLocation:e.pageUrl,path:o.path||r.page.path,watch:!0}),r.is_threaded&&t.extend(o,{pageTitle:e.pageTitle,mootTitle:e.mootTitle});var s=new v(r,o.path+"#"+o.key,o,i,!0);return r.page.emit("before:moot",s),i.call("createMoot",o,function(e){s.emit("key",e),s.seed.emit("key",e),r.page.one("moot",n).emit("moot",s,!0),s.is_followed=!0,s.emit("follow")})},createForum:function(e,o){var n=e.categories;return"string"==typeof n[0]&&(n=t.grep(n,function(e){return!!e}),e.categories=n=t.map(n,function(e){return{title:e.slice(0,40),path:r.path+"/"+p(e)}})),i.call("createForum",e,function(){r.is_stub=!1,r.categories=n,r.emit("categories",n),d(o,r,n)})},getCategory:function(e){return e=e.split("#")[0],t.grep(r.categories,function(t){return t.path==e})[0]},setCategories:function(e,o){return t.each(e,function(e,t){t.path||(t.path=p(t.title)),-1==t.path.indexOf(r.path)&&(t.path=r.path+"/"+t.path)}),i.call("setCategories",{path:r.path,categories:e},function(){r.emit("categories",e),d(o,r,e)})},update:function(e,t){return r.user.is_admin?(e.forumname=r.name,i.call("forumUpdate",e,function(){r.one("update",t).emit("update",e)})):void 0},reload:function(e){return e&&(e.moots||e.user)?r.emit("reload",e):a("reload"),r},log:function(e,o){o=t.extend({forum:r.path,page:r.page.path,user:r.user.email,version:r.version,url:location.href,ua:navigator.userAgent},o),i.call("log",{message:e,data:o})},destroy:function(){return r.emit("destroy",r).off("*"),i.destroy(),r.is_destroyed=!0,r}}),r.is_forum&&(e.show_title=!0),r.on("before:init",function(){i||(i=new n({url:l,transports:e.transports,secure:!(t.browser.msie&&"https"!=e.pageUrl.slice(0,5))}),r.channel=new g(r,i),i.reconnect(r.reload),r.page=new y(r,l.path,i),e.path&&(r.is_forum||r.is_threaded&&e.path.split("#")[1])&&(r.page=new y(r,e.path,i))),r.page.is_init=!0,e.pageUrl.split("file://")[1]&&(e.pageUrl="https://moot.it"+r.path),a("init")}).on("init",function(e){r.page.is_init=!0,t.extend(r,e),r.is_stub=!e.moots,r.user=new b(r,e.user,i),r.emit("ready",r,i),r.emit("before:load",r.page),r.page.emit("load",e.moots),r.emit("load",r.page),delete r.moots}).on("load",function(e){r.page=e}).on("reload",function(e){r.page.emit("reload",e.moots)}).on("categories",function(e){e&&(r.categories=e,r.is_stub=!1)})}function g(e,n){var a=o(this),i=e.conf().debug;n.ready(function(){a.time_offset=n.time_offset}),n.event("moot",function(t,o){t.from_channel=o.from_channel=!0;var i=new v(e,t,o,n),r=!!e.getCategory(t.path),l=e.page;e.is_forum&&r&&a.emit("moot",i),"feed"!=l.type&&("all"!=l.type&&(i.page.path+"/").slice(0,l.path.length+1)==l.path+"/"||l.title==i.seed.user.displayname||"all"==l.type&&r)&&(e.is_forum||a.emit("moot",i),l.emit("moot",i,!0))}).event("reply",function(t,o){var i=e.page.find(t);if(!i){if(e.is_commenting)return!1;if(e.is_threaded){if(t.split("#")[0]!=e.page.path)return!1}else if(!e.getCategory(t))return!1;i=new v(e,t,{},n)}o.from_channel=!0,o=new w(i,o,n),i.emit("reply",o),a.emit("reply",o)}).event("type",function(t,o){(e.is_forum&&e.getCategory(t)||e.page.path==t)&&a.emit("type",o,t);var n=e.page.find(t);n&&n.emit("type",o)}).event("like unlike remove spam unspam update",function(t,o,n){var i=e.page.find(o);i&&i.seed&&(i=i.seed),i&&i.emit(t,n,!0),a.emit(t,i||o,n)}).event("error",function(e,t){i&&console.error(arguments),a.emit("error",e,t)}).event("join enter leave away return",function(e,t,o){a.emit(e,t,o)}).event("login banned message",function(t,o){e.user.emit(t,o)}).event("login",function(t){e.reload(t)}).on("send",function(o,n,a){if(a){var i,r=+new Date;t.each([3e3,5e3,8e3,12e3],function(t,n){setTimeout(function(){!i&&+new Date-r>n&&(0==t&&e.emit("waiting",o,a),a.emit("progress",t,n))},n)}),a.done(function(){i=1}).fail(function(){i=1})}}).ready(function(){a.session=n.session()}).on("close reconnect error",function(t){"r"==t[0]?e.one("reload",function(){a.emit(t)}):a.emit(t)}),i&&n.on("send",function(e,t){console.info(">",e,t&&1==t.length?t[0]:t)}).on("receive",function(e){e&&console.info("<",e.result||e.params||e)})}function h(e,o,n,a){var i=this,r=e.path,l=e.app.page,s=e.match_count>=0&&a;i.is_gap=!0,i.size=i.available=o,s&&(i.match_count=e.match_count,t.each(e.replies,function(){this.is_gap||i.match_count--})),i.more=function(a,s){if(!i.available)return d(s);var c=Math.min(i.available,Math.ceil(o/(10>o?1:27>o?2:4)),50),u=a?c:e.reply_count,p=a?1:c,m=a?0:e.replies.length-1;if(a)for(var f,g=0;e.replies.length>g&&(f=e.replies[g],f!=i);g++)u+=f.is_gap?f.available:1,p+=f.is_gap?f.available:1,m++;else{for(var f,g=m;g>=0&&(f=e.replies[g],f!=i);g--)u-=f.is_gap?f.available:1,m--;0>=m&&(m=1),p=u-p+1}var v={path:r,start:u,end:p,timeout:300};return i.match_count>0&&(v.path+="search"==l.type?"?"+l.title:l.user.username,delete v.end),n.call("moreReplies",v,function(o){o=t.map(o,function(t){var o=t.reply_count;return i.available-=o||1,!o&&i.match_count&&i.match_count--,o?new h(e,o,n):new w(e,t,n)}),0>i.available&&(i.available=0),e.one("more",s).emit("more",o,m)})}}function v(e,n,a,i,r){function l(){if(r)throw Error("Not saved");if(!e.user.is_logged)throw Error("not logged")}var s,c=o(this),u=e.page;if("string"==typeof n){var f=n.split("#");n={page:e.getCategory(f[0])||{path:n,title:n},path:n}}r&&(n.is_expanded=!0),t.extend(c,n),t.extend(c,{app:e,replies:[],reply_count:c.reply_count||0,time:c.time||+new Date,has_replied:!!n.has_replied,is_followed:!!n.is_watched,is_expanded:!!n.is_expanded}),c.page=c.page||{},c.page.path=n.path.split("#")[0],r||a.user||e.is_commenting||(c.is_commenting=!0,a.user={}),c.seed=a=new w(c,a,i,r),c.is_own=r||a.user&&a.user.path==e.user.path,t.extend(c,{is_loaded:c.is_expanded,reply:function(o,n){l();var a=e.conf(),r=t.trim(o.body),d=c.seed.is_stub;if(!t.trim(r))throw Error("no content");if(s==r)throw Error("duplicate");s=r,o.body=r=m.fixBody(r,!0),o.key=p(r.join("")),o.watch=!0;var f=new w(c,o,i,!0);return c.emit("before:reply",f),t.extend(o,{path:d?u.path:c.path,mootTitle:a.mootTitle||a.pageTitle,pageTitle:a.pageTitle,pageLocation:a.pageUrl}),i.call("reply",o,function(e){f.emit("key",e),c.one("reply",n).emit("reply",f),c.is_followed=!0,c.emit("follow")})},posts:function(){return t.grep([c.seed].concat(c.replies||[]),function(e){return!e.is_gap})},find:function(e){if(c.seed.key==e)return c.seed;e.split("#")[1]||(e=c.path+"/"+e);for(var t=0,o=c.posts(),n=o.length;n>t;t++)if(o[t].path==e)return o[t]},expand:function(e){return c.toggle(!0,e)},collapse:function(e){return c.toggle(!1,e)},load:function(e){var t=c.path+("search"==u.type?"?"+u.title:"user"==u.type?u.user.username:"");return c.is_loaded?d(e,c):i.call("moot",t,function(t){c.one("load",e).emit("load",t).emit("expand")})},toggle:function(o,n){function a(){return c.one(r,n).emit(r)}if(t.isFunction(o)&&(n=o,o=void 0),"boolean"!=typeof o&&(o=!c.is_expanded),o==c.is_expanded)return d(n,c);if(o&&!c.is_loaded)return c.load(n);var r=o?"expand":"collapse";return e.user.is_logged?i.call(r+"Moot",c.path,a):a()},followToggle:function(o,n){if(l(),t.isFunction(o)&&(n=o,o=void 0),"boolean"!=typeof o&&(o=!c.is_followed),o==c.is_followed)return d(n,c,o);var a=c.path;return o&&(a={pageLocation:e.conf().pageUrl,path:a}),i.call("moot"+(o?"Watch":"Unwatch"),a,function(){var e=o?"follow":"unfollow";c.is_followed=o,c.one(e,n).emit(e)})}}).on("key",function(e){r=!1,c.path=c.page.path+"#"+e}).on("load",function(e){c.is_loaded=c.is_expanded=!0,c.reply_count=e.reply_count,c.seed=new w(c,e.seed,i)}).on("load",n,function(e){var o=0;c.match_count=e.match_count,t.each(e.replies||[],function(e,t){var n=t.reply_count;c.replies.push(n?new h(c,n,i):new w(c,t,i)),o+=n||1}),c.is_expanded&&c.reply_count>o&&c.replies.unshift(new h(c,c.reply_count-o,i,!0))}).on("reply",function(e){c.lastReply=+new Date,c.reply_count++,e.is_own&&(c.has_replied=!0),c.is_loaded&&c.replies.push(e)}).on("remove",function(e){return s=null,e.is_seed?u.emit("remove",c):(c.replies=t.grep(c.replies,function(t){return t.path!=e.path}),c.reply_count--,void 0)}).on("more",function(e,t){[].splice.apply(c.replies,[t,0].concat(e))}).on("expand collapse",function(e){c.is_expanded="e"==e[0]}).on("reload",function(o){o&&(c.reply_count=o.reply_count,c.has_replied=!!o.has_replied,c.is_expanded?t.map([o.seed].concat(o.replies),function(t){var o=c.find(t.key);o?o.emit("reload",t):c.lastReply<t.time&&(t.from_channel=!0,o=new w(c,t,i),c.emit("reply",o),e.channel.emit("reply",o))}):o.is_expanded&&c.emit("load",o))}),e.user.on("logout",function(){c.has_replied=!1,c.emit("reload")})}function b(e,n,a){function i(){if(!l.is_logged)throw Error("must be logged")}function r(e){return e[0].toUpperCase()+e.slice(1)}var l=o(this),s=(e.path+"/feed",0);n.new_count=n.new_count||{all:0,feed:0},e.is_stub&&n.path&&(n.is_admin=!0),n.email||delete n.email,t.extend(l,n,{app:e,img:n.img||M,is_logged:!!n.path,is_visible:!!n.is_visible,is_admin:!!n.is_admin,logout:function(t){return i(),a.call("logout",{path:e.page.path,expand_all:!e.conf().show_title},function(){l.emit("logout",{}),d(t,l)})},join:function(e,t){if(l.is_logged)throw Error("already logged");return e.username=e.username.toLowerCase(),a.call("join",e,function(e){l.emit("join",e),d(t,l)})},update:function(t,o){return t.forumname=e.name,a.call("userUpdate",t,function(){t.url||l.emit("update",t),d(o,l)})},isAvailable:function(e,t){return a.call("isAvailable",e,t)},unfollowAll:function(){return a.call("forumUnwatch",e.path,function(){t.each(e.page,function(){this.is_followed=!1,this.emit("unfollow")})})},type:function(t,o,n){if(!l.is_logged||l.is_visible){var i=+new Date;i-s>1e3*I&&(a.call("type",{path:o?o.path:e.page.path,size:t.length},n),s=i)}},hideToggle:function(t){return a.call("user"+(l.is_visible?"Hide":"Show"),function(){var o=l.is_visible=!l.is_visible;e.channel.emit(o?"enter":"leave",l),d(t,l,o)})}}),t.each(["email_confirm","account_confirm","password_reset","validationCode_send","resetCode_check"],function(t,o){var n=o.split("_");l[n[1]+r(n[0])]=function(t,o){return a.call(n[0]+r(n[1]),t,function(t){t&&t.moots&&e.reload(t),d(o,l,t)})}}),l.on("update",function(e){delete e.email,t.extend(l,e),l.is_logged=!0}).on("follow unfollow",function(e){l.subscription_count+="follow"==e?1:-1}).on("login join",function(e,o){l.is_logged=!0,t.extend(l,o.user),l.emit("newcount",l.new_count)}).on("logout",function(){t.extend(l,{is_logged:!1,is_admin:!1,unverified:!1,new_count:{all:0,feed:0},img:M,displayname:""}),l.emit("newcount",l.new_count),e.anon_count++,e.channel.emit("leave",l)}),e.on("load",function(e){l.emit("newcount",l.new_count),l.new_count[e.type]=0,"all"==e.type&&(l.new_count.feed=0)}),e.channel.on("moot reply",function(t,o){e.page.find(o.path)||(l.new_count.all++,l.emit("newcount",l.new_count))})}function y(e,n,a){var i=o(this);e.path&&n!=e.path&&n.slice(0,e.path.length+1)!=e.path+"/"&&(n=e.path+"/"+n),n=n.replace("//","/").replace(/[<>]/g,""),"/"==n.slice(-1)&&(n=n.slice(0,-1));var r=n.split("::");n=r[0],i.type=/\?/.test(n)?"search":/\/feed/.test(n)?"feed":n==e.path+"/spam"?"spam":/@/.test(n)?"user":2==n.split("/").length?"all":/#/.test(n)?"moot":"page","user"==i.type&&(i.user=new k(e,{path:n.split("/")[2]},a)),t.extend(i,{app:e,path:n,extra:r[1],find:function(e){for(var t,o=0;i.length>o;o++){if(t=i[o],t.path==e)return t;if(t=t.find(e))return t}},more:function(t){if(i.available){i.emit("before:more");var o={path:i.path,start:i.length,expand_all:!e.conf().show_title};return a.call("moots",o,function(e){i.one("more",t).emit("more",e)})}},collapse:function(e){var o=t.grep(i,function(e){return e.is_expanded}),n=t.map(o,function(e){return e.path});return a.call("collapseMoot",n,function(){t.each(o,function(){this.emit("collapse",!0)}),d(e,i,o)})}}).on("load",function(o){if(e.is_stub)return!1;if(t.extend(i,o),!i.title){var a=t.trim(n.replace(/[\/-]/g," "));a=a[0].toUpperCase()+a.slice(1),i.title=a}i.available=o.size,delete i.entries,e.is_commenting&&(o.entries[0]||o.entries.push({seed:{user:e.user},is_expanded:!0,path:n}),o.entries[0].seed.is_stub=!0)}).on("load more",function(o,n){t.each(n.entries,function(t,o){var n=new v(e,o,o.seed,a);i.emit("moot",n)}),i.available-=n.entries.length}).on("moot",function(e,t){i[t?"unshift":"push"](e)}).on("remove",function(e){var o;t.each(i,function(t,n){return n.path==e.path?(o=t,!1):void 0}),o>=0&&(i.splice(o,1),i.size--)}).on("reload",function(o){o&&t.map(o.entries,function(t){var o=i.find(t.path);t.from_channel=!0,o?o.emit("reload",t):i[0].lastReply<t.lastReply&&i.emit("moot",new v(e,t,t.seed,a),!0)})})}function w(e,n,a,i){function r(){if(!c.is_logged)throw Error("not logged");if(i)throw Error("not saved")}var l=o(this),s=e.app,c=s.user,u=e.path+(n.title||n.is_stub?"":"/"+n.key);i&&(n=t.extend({},n,{user:c})),n.body=n.body||[],n.user=new k(s,n.user,a),t.extend(l,n,{app:s,moot:e,path:u,key:n.key||u.split("#")[1],is_own:i||n.user.path==c.path,likes:0,is_expanded:!!n.body[1],is_loaded:!n.has_more||!!n.body[1],is_seed:!!n.title,is_new:!!n.from_channel||c.new_count.all>0&&n.is_new,is_liked:!!n.is_liked,like_count:n.like_count||0,meta:n.meta||{},time:n.time||+new Date,likeToggle:function(o,n){if(r(),t.isFunction(o)&&(n=o,o=void 0),void 0===o&&(o=!l.is_liked),o==l.is_liked)return d(n,l,c);var i=l.is_liked?"unlike":"like",p=s.conf(),m=u;return e.seed.is_stub&&o&&(m={pageLocation:p.pageUrl,mootTitle:p.mootTitle||p.pageTitle,pageTitle:p.pageTitle,path:u}),a.call(i,m,function(){l.one(i,n).emit(i,c),e.emit(i,l)})},like:function(e){return l.likeToggle(!0,e)},unlike:function(e){return l.likeToggle(!1,e)},setMeta:function(e,t){return r()&&a.call("setMeta",u,e,function(){l.one("meta",t).emit("meta",e)})},remove:function(e){if(!l.removable())throw Error("No permission");var t=c.is_admin?{path:u,force:1}:u;return a.call("delete",t,function(){l.one("remove",e).emit("remove")})},removable:function(){return c.is_admin||i||l.is_own&&!l.like_count&&(!e.replies.length||e.replies.slice(-1)[0]==l)&&2.718*60>(+new Date-l.time)/1e3},whoLikes:function(e){return l.likes?e.call(l,l.likes):a.call("whoLikes",u,function(t){l.likes=t||[],d(e,l,t)})},more:function(e){return l.is_loaded?d(e,l):a.call("more",u,function(t){l.one("more",e).emit("more",t)})},toggle:function(e,o){function n(){return l.one(i,o).emit(i)}if(t.isFunction(e)&&(o=e,e=void 0),void 0===e&&(e=!l.is_expanded),e===l.is_expanded)return d(o,l);if(e&&!l.is_loaded)return l.more(o);var i=e?"expand":"collapse";return c.is_logged?a.call(i+"Post",u,n):n()},expand:function(e){return l.toggle(!0,e)},collapse:function(e){return l.toggle(!1,e)}}).on("key",function(t){l.key=t,l.path=u=l.is_seed?e.path:e.path+"/"+t,i=!1}).on("like",function(e){(e.is_logged||e.path==c.path)&&(l.is_liked=!0),l.likes&&l.likes.push(e),l.like_count++}).on("unlike",function(e){(e.is_logged||e.path==c.path)&&(l.is_liked=!1),l.likes&&(l.likes=t.grep(l.likes,function(e){return e.path!=c.path})),l.like_count--}).on("more",function(e){l.is_loaded=l.is_expanded=!0,l.body.push(e)}).on("expand collapse",function(e){l.is_expanded="expand"==e}).on("remove",function(t,o){e.emit("remove",l,o)}).on("meta",function(e){t.extend(l.meta,e)}).on("update",function(e){t.extend(l,e)}).on("spam unspam",l.spam_level,function(e,t){if(l.spam_level=t,"inline"!=e&&(l.flag=e),-1==t)l.emit("remove");else if(t>=1){var o=20*I;l.body[0]=(l.body[0]||"").replace(/\n/g," "),l.body[0].length>o&&(l.body[1]=l.body[0].slice(o)+(l.body[1]||""),l.body[0]=l.body[0].slice(0,o)),l.is_expanded=!1}}).on("reload",function(e){l.is_expanded=!!e.is_expanded,l.is_liked=!!e.is_liked,l.is_new=!!e.is_new}),t.each(["spam","unspam"],function(e,t){l[t]=function(e){return r(),a.call(t,u,function(o){l.one(t,e).emit(t,o)})}}),s.user.on("logout",function(){l.emit("reload",{is_expanded:l.is_expanded,is_liked:!1,is_new:!1})})}function k(e,o,n){function a(){if(!e.user.is_admin)throw Error("Must be admin")}var i=this;t.extend(i,o);for(var r=0,l=e.admins||[];l.length>r;r++)"@"+l[r].username==i.path&&(i.is_admin=!0);i.ban=function(e){return a(),n.call("ban",{path:i.path,time:-1},e)},i.unban=function(e){return a(),n.call("removeBan",{path:i.path,timeout:2e3},e)}}!function(e){if(!e.browser){var t=e.browser={},o=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||0>o.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(o)||[];n[1]&&(t[n[1]]=!0,t.version=n[2]||"0")}}(jQuery);var x="jsonrpc.session",_={},T=[];e||(window.RPC=n),_.ajax=function(e,o,n){var a=this,i={};t.extend(a,{send:function(o){t.post(e,o.replace(/\?\?/g,"?&quest;"),n,"json")},poll:function(e,r){a.destroy(),i=t.post(e,r,0,"json").done(function(t){n(t),t.error||a.poll(e,r)}).fail(function(e,t){o.is_destroyed||"abort"==t||o.close()})},destroy:function(){1==i.readyState&&i.abort()},ping:function(o){return t.ajax({url:e+"/ping",dataType:"text"}).done(o)}})},_.ajax.supported=t.support.cors,t.cookie2=function(e,t){var o=window.localStorage;try{return null===t?o.removeItem(e):t?o[e]=t:o[e]}catch(n){}},_.upgrade=function(e,o,n){var a,i=this,r=new _.ajax(e,o,n),l=_.websocket.supported;l&&(l=new _.websocket(e,o,n),o.one("receive",function(e){e.result&&l.ping(function(){a=!0,o.call("rpc.upgrade"),o.emit("upgrade",l)})})),o.on("close",function(){a=!1,o.one("receive",function(){l&&(a=!0),o.call("rpc.upgrade")})}),t.each(["send","close","poll","ping","destroy"],function(e,t){i[t]=function(){var e=(a?l:r)[t];return e?e.apply(null,arguments):i}})},_.upgrade.supported=t.support.cors||e;var C=e?require("ws"):window.WebSocket||window.MozWebSocket;if(_.websocket=function(e,o,n){var a,i=e.replace(/^http/,"ws"),r=this,l={};t.extend(r,{send:function(r,s){var c=l.readyState;if(0!==c){if(1==c)return r&&(l.send(r),a=r),s&&s();l=new C(i),window.mootsocket=l,l.onopen=function(){c=l.readyState,l.onmessage=function(e){a=null,n(e.data)},l.onclose=function(){o.close()},l.onerror=function(a){c=l.readyState,3!=c&&r&&(o.log("socket error",{err:a,msg:r,state:c}),t.post(e,r,n,"json").done(function(e){o.log("socket fix",{ret:e,msg:r})}))},r&&l.send(r),s&&s()}}},destroy:function(){1==l.readyState&&l.close()},ping:function(e){return r.send(null,e),{fail:t.noop,abort:t.noop}}})},_.websocket.supported=!!C,!e&&C){var j=navigator.userAgent.toLowerCase(),z=navigator.appVersion.split("Version/")[1];C&&t.browser.webkit&&!/chrome/.test(j)&&z&&"5.1.14">z.split(" ")[0]&&(_.websocket.supported=!1),t.browser.mozilla&&t(document).keydown(function(e){27==e.which&&e.preventDefault()})}_.xdomain=function(e,o,n){function a(e,o,n,a){var i=s[e];return i||(i=s[e]=new XDomainRequest,i.onerror=t.noop,i.ontimeout=t.noop,i.onprogress=t.noop),i.open(a||"post",e),i.onload=function(){var e=i.responseText;try{e=JSON.parse(e)}catch(t){}n(e)},i.send(o),i}var i,r=this,l={},s={};r.send=function(t){a(e,t,n)},r.destroy=function(){i&&(i=!1,l.abort())},r.poll=function(e,s){o.is_destroyed||(r.destroy(),i=!0,l=a(e,t.param(s),function(t){i=!1,n(t),setTimeout(function(){t.error||r.poll(e,s)},200)}),l.onerror=function(){console.error("xdomain",JSON.stringify(arguments[0])),o.is_destroyed||o.close()})},r.ping=function(t){var o=a(e+"/ping?"+Math.random(),"",t,"get");return{fail:function(e){o.onerror=e},abort:function(){o.abort()}}}},_.xdomain.supported=window.XDomainRequest,n(function(e){var t,o,n=3e4,a=this;a.conf,a.on("receive heartbeat",function(){t=+new Date}).on("close reconnect",function(e){a.is_closed="close"==e}).ready(function(){if("file:"!=location.protocol&&"localhost"!=location.hostname||navigator.onLine){var i;o=o||setInterval(function(){navigator.onLine!==!1||a.is_closed?a.is_closed===!0&&navigator.onLine!==!1?(i&&i.abort(),i=e.ping(a.reconnect)):a.is_closed||(t=t||+new Date,+new Date-t>n&&e.ping(function(){t=+new Date,a.poll()}).fail(a.close)):a.close()},1e3)}}).destroy(function(){clearInterval(o)})}),t.fn.jsonrpc=function(e){var o=0;return this.each(function(){var n=t(this),a="#multipart-rpc-"+o++,i=t(":input[name]",n),r=(t("<iframe/>",{name:a,src:"about:blank"}).hide().insertBefore(n),t("<input/>",{type:"hidden",name:"jsonrpc"}).appendTo(n)),l=t(window);n.attr({action:e.api,method:"post",target:a,enctype:"multipart/form-data"}),n.submit(function(){var o=e.params||{};i.filter(e.query||"*").each(function(){var e=t(this);this.disabled||(o[this.name]=e.is(":checkbox")?this.checked:e.val())}),i.prop("disabled",!0).filter(":file").each(function(){this.disabled=!this.value}),r.val(JSON.stringify({session:e.session,method:e.method,params:[o],jsonrpc:"2.1.0",transport:"iframe",id:a})),l.on("message."+a,function(e){try{var t=JSON.parse(e.originalEvent.data),o=t.result||t.error;t.id==a&&(i.prop("disabled",!1),n.trigger(t.result?"done":"fail",o).trigger("always",o),l.off("message."+a))}catch(e){}})})})};var A=1,q=26,$=36,S=38,D=700,O=128,L=72,I=2.718,H=e?require("url").parse:function(e){var t=document.createElement("a");t.href=e;var o=t.pathname;return"/"!=o[0]&&(o="/"+o),{href:e,pathname:o,port:1*t.port||"",hostname:t.hostname,hash:t.hash,search:t.search,protocol:t.protocol}};m.urlify=p;var F,E={};e?module.exports=m:window.moot=m;var M="//cloudinary-a.akamaihd.net/moot/image/upload/t_default-avatar/v1364433583/moot-default-avatar.jpg";y.prototype=[],m(function(e,o){function n(t){for(var o=0,n=e.online;n.length>o;o++)if(n[o].path==t)return o;return-1}e.on("reload",!0,function(n){e.users=n&&n.users||e.users||{online:[]},e.anon_count=e.users.anon_count||0,e.online=t.map(e.users.online,function(t){return t.is_online=!0,new k(e,t,o)})}),e.getUser=function(t){return e.online[n(t)]},e.channel.on("enter",function(t){t&&(t.is_online=!0,e.online.push(new k(e,t,o)))}).on("leave",function(t){if(t){var o=n(t.path);o>=0&&e.online.splice(o,1)}}).on("away return",function(t,o){o&&(o=e.getUser(o.path)),o&&(o.is_active="return"==t)}).on("enter leave away return",function(t,o,n){n>=0&&(e.anon_count=n)})});var U=400*I,N=40*I,R=26*I,W=20,P=/\[#(.+)\/#\]/g,B=/-{3,} *(\w*)/g;m.fixTitle=function(e){return e=t.trim(e).replace(P,"$1"),t.each(e.split(/\s+/g),function(t,o){o.length>R&&!/https?:\/\//.test(o)&&-1==o.indexOf("[")&&(e=e.replace(o,o.slice(0,R)+" "+o.slice(R)))}),e},m.fixBody=function(e,t){if(e=m.fixTitle(e).replace(/\n{2,}/g,"\n\n"),!t)return[e];var o=e.slice(0,U),n=e.slice(o.length);n.length&&N>n.length&&(o=e.slice(0,U-N));var a=W+o.split(B).length/2,i=e.split("\n");return i.length>a&&(o=i.slice(0,a).join("\n").slice(0,U)),n=e.slice(o.length),o=[o],n&&o.push(n),o}}(!this.top,jQuery),!function(e,t){"use strict";function o(e){return e&&e.replace(L,function(e,t,o){return"8)"==o&&"\n"==t?t+o:"<i>"+t+O[o]+"</i>"})}function n(e,t){return e&&(e=e.replace(S,"&lt;$1$2$3"),t&&(e=e.replace(D,"<mark>$1</mark>"))),e}function a(e){return e?e.replace(/[\<\>]/g,""):""}function i(e){return e?e.replace(H,"&hellip;").replace(F,"&#8220;$1&#8221;").replace(E," &#8216;$1&#8217;").replace(R,"&mdash;").replace(W," &ndash; "):""}function r(e){return e=i(e).replace(N,"<em>$1</em>").replace(M,function(e,t){return/\s/.test(t)?"<em>"+t+"</em>":"<strong>"+t+"</strong>"}),e=f(e),e=o(e)}function l(e){if(!e)return"";var o="";return t.each(e.split(U),function(e,t){o+=e%2?"<samp>"+t+"</samp>":r(t)}),o}function s(e){return e.replace(/<(\w{1,2})"([\w\- ]+)"([^>]*)>/g,function(e,t,o,n){return o="m-"+o.split(" ").join(" m-"),"<"+(P[t]||t)+' class="'+o+'"'+n+">"}).replace(/<(\/?)(\w)>/g,function(e,t,o){return"<"+t+P[o]+">"})}function c(e){var t=+new Date,o=moot().channel.time_offset||0;10>t-e&&(e-=o);var n=new Date(t-o),a=moot.language,i=(n-e)/1e3,r=Math.floor(i/86400),l=Math.ceil(r/7),s=0>=r&&(60>i&&a.now||3600>i&&Math.floor(i/60)+a.min||86400>i&&Math.floor(i/3600)+a.hour)||7>r&&r+a.day||10>l&&l+a.week;if(s)return s;var c=new Date(e),d=c.getYear();return J=J||a.months.split(","),c.getDate()+" "+J[c.getMonth()]+(d!=n.getYear()?" "+(d+1900):"")}function d(e){var t=""+new Date(e);
    return t.split("GMT")[0]}function u(e,t){return(Q[e]=Q[e]||Function("_","return '"+e.replace(/\{([^\}]+)\}/g,"'+ (_.$1 === undefined ? '' : _.$1) +'")+"'"))(t)}function p(e,o){var n=t.extend({},o||{},{l:moot.language}),a=A[e];n.time&&(n.prettyTime=c(n.time),n.fullTime=d(n.time));try{return u(a,n)}catch(i){console.error(e,a,i,n)}}function m(e,o){if(o){var n=o.replace(G," ").split(K);o=n[1]||n[0]||e.replace(K,"")}if(e=e.replace(/<\/?mark>/g,"").replace(G,"_"),e=e.replace("&mdash;","--"),V.test(e.split("?")[0])){var a="m-image",i=e.split("?")[0].split("/").slice(-1)[0];return e.split("flickr.com")[1]?a+=" m-flickr-link":e.split("dropbox.com")[1]&&(e=e.replace("www.dropbox","dl.dropbox"),a+=" m-dropbox-link"),i.length>27&&(i=i.slice(0,10)+"&hellip;"+i.slice(-18)),"<a class='"+a+"' href='"+e+"'>"+(o||i).replace(S," ")+"</a>"}var r=e,l="class='m-link";"http"!=e.slice(0,4)||e.split(location.host)[1]?(l+=" m-local-link",r=r.replace(RegExp("https?://"+location.host),"").replace(location.pathname,""),"#!/"==r.slice(0,3)&&(l+=" m-moot-link",e=r,r=r.slice(3)),l+="'"):(r=r.split("://")[1],t.each(Z,function(t,o){var t=e.indexOf(o);return-1!=t?("google.com"==o?(r=r.split("q="),r=r[1]?r[1].split("&")[0]:r[0]):(r=e.slice(t+o.length+1),/wikipedia/.test(o)?r=r.replace("_"," "):"d.pr"==o&&(l+=" m-image","+"!=e.slice(-1)?e+="+":r=r.slice(0,-1))),l+=" m-"+o.split(".")[0]+"-link'",!1):void 0}),l+="' target=_new "),r.length>40&&("/"==r.slice(-1)&&(r=r.slice(0,r.length-1)),r=r.split("/"),r=r[1]?r[0]+"/&hellip;/"+r.slice(-1)[0].slice(-27):r[0].slice(0,27)+"&hellip;");var s=e.slice(-1);return("."==s||","==s||")"==s&&-1==e.indexOf("("))&&(e=e.slice(0,-1)),"<a "+l+" href='"+e+"'>"+(o||r)+"</a>"}function f(e){return e.replace(X,function(e,t,o){return o=o.split(/[\s\'\"]/)[0].replace(/&#\w+;?/g,""),o.toLowerCase().indexOf("script:")>=0?t:m(o,t)}).replace(Y,function(e,t){if(t)return e;var o=e.split("&#82");return o[1]?m(o[0])+"&#82"+o[1]:m(e)})}function g(e,o,n){var a=window,i=(a.screenX||a.screenLeft)+(t(a).outerWidth()-o)/2,r=(a.screenY||a.screenTop)+50,l="left="+i+",top="+r+",resizable=0,location=0,status=0,scrollbars=0,dialog=0";a.open(e,"moot_popup",l+",width="+o+",height="+n)}function h(e){return e=parseInt(e,10),e>=10?e:"0"+e}function v(e){e=e||0;var t=(Math.floor(e/3600),Math.floor(e/60));return e-=60*t,t+":"+h(e)}function b(e,o,n){e&&e.length&&t("html, body").animate({scrollTop:e.offset().top-(o||200)},400,function(){e.mootboost(),n&&n()})}function y(e){var o=t(p("more")),n=o.eq(0),a=o.eq(2),i=o.eq(1),r=t("a",i).tooltip2({prefix:"m-",position:"right"}),l=t(".m-tooltip",r.eq(1)),s=t("em",r).text(e.available);return e.available>26&&(i.ac("big"),l.text(moot.language.show_new)),r.click(function(){var o=t(this).ac("loading"),r=o.hc("to-head"),c=r?n:a,d={};d[r?"paddingBottom":"paddingTop"]=75*Math.min(e.available,10),c.animate(d),e.more(r,function(n){o.rc("loading"),s.text(e.available),c.stop().css({padding:0}),r||n.reverse(),t.each(n,function(e,t){t=t.is_gap?y(t):k(t),t.is_gap||t.mootboost(),c[r?"append":"prepend"](t)}),10>e.available&&(i.rc("big"),l.text(moot.language.show_more)),e.available||i.remove()})}),o}function w(e,a){function r(e){return e.join("").replace(D,"$1")}function l(){var e;t(".m-seed, .m-reply:not(.m-preview)",g).each(function(){var o=t(this),n=t(".m-facelink img",this).attr("title");e&&n&&o.tc("followup",e===n),e=n})}function s(o){var n=t(".m-replies, .m-seed .m-body-wrap, .m-form",g);o?(g.ac("animating expanded").rc("collapsed"),n.mootslide(200,function(){g.rc("animating")})):n.slideUp(100,function(){g.rc("expanded").ac("collapsed"),t(this).css({display:""})}),e.is_expanded=o}var u=e.app,m=e.seed,f=window.moot.language,g=t(p("moot",t.extend({},e,m))),h=t(".m-replies",g),v="search"==a.type;g.data("moot",e),e.root=g.mousemoved("moot-hover").tc("flat",!!e.is_commenting),g.prepend(k(m,!0));var b=t(".m-seed",g);return e.is_expanded||g.ac("collapsed"),e.on("expand",!0,function(){var o=t(".m-follow",b).tooltip2({prefix:"m-"}).click(function(){return o.ac("loading"),e.followToggle(),!1})}).on("follow unfollow expand",!0,function(o){var n=e.is_followed;t(".m-follow",b).rc("loading hovered").tc("followed",n).find(".m-tooltip").text(f[n?"unwatch":"watch"]),u.user.emit(o)}),e.on("load",e.is_expanded,function(o){var n="load"==o||o.seed;if(g.ac("expanded").rc("loading collapsed"),n){var a=k(e.seed,!0);b.replaceWith(a),m.root=b=a}t.each(e.replies,function(e,t){h.append(t.is_gap?y(t):k(t))}),n&&(s(!0),l())}).on("collapse",function(e){e&&s(!1),t(".m-new_count",b).hide()}).on("remove",function(e,o){if(e.is_own&&!o){var n=e.is_seed?t(".m-create textarea",u.root):t("textarea",g);e.is_seed?(n.eq(0).val(r([e.title])).focus(),n.eq(1).val(r(e.body))):(n.val(r(e.body)).focus().keydown(),n[0].select())}}).on("before:reply",function(e){u.user.is_admin||t(".m-remove",g).remove(),k(e).appendTo(h),e.root.ac("created"),e.on("key",function(){setTimeout(function(){e.root.rc("created")},500)})}).on("reply",function(o){o.from_channel&&e.is_loaded&&(u.user.is_admin||t(".m-remove",g).remove(),k(o).appendTo(h).mootslide()),o.is_own&&t(".m-is-new",g).rc("is-new")}).on("type",function(o){var n=t("<em/>").ac("typing").appendTo(t(".m-actions:first",g)),a=t(".m-writing",g);e.is_expanded&&a.html(p("writing",{user:o})),setTimeout(function(){n.remove(),a.empty()},1e3*et)}).on("*",!0,function(r){if("type"!=r){var s=e.reply_count,p=(e.new_count,(e.is_expanded?m.time:e.lastReply)||m.time);t(".m-reply_count",b).toggle(s>0).text(s).tc("has_replied",!!e.has_replied),u.is_commenting&&(s&&t(".m-comment_count",g).text(s+" "+f["comm_count_"+(s>1?"n":"1")]),g.tc("first-comment",!s),m.like_count||m.is_liked||t(".m-like",m.root).text(f.likepost));var h=t(".m-time",b).text(c(p)).attr({title:d(p),"data-time":p}).tooltip2({prefix:"m-",timeout:500});t(".m-title",b).html(o(i(n(m.title,v)))),"moot"!=a.type&&t(".m-permlink",g).tooltip2({prefix:"m-"}).add(h).attr("href","#!"+e.path.replace(u.path,"")),e.page&&"page"!=a.type&&t(".m-cat",b).html(f.in_forum+" <a>"+e.page.title+"</a>").find("a").click(function(){return e.is_expanded?(u.load(e.page.path),!1):void 0}),l()}}),u.is_commenting||"moot"==a.type||g.click(function(o){if(!g.hc("loading")){var n=e.is_loaded,a=t(o.target);if(e.is_expanded)a.closest(".m-title").length&&(e.collapse(),n&&s(!1));else if(!a.closest(".m-follow").length)return e.expand(),n?s(!0):g.ac("loading"),!1}}),g}function k(e,o){e.user.displayname=a(e.user.displayname);var n=e.app,i=moot.language,r=e.is_stub?t(".m-comment-head",n.root):t(p(o?"seed":"reply",e)),l=n.user,s=e.moot.match_count>=0,c=t(".m-unspam",r);return n.is_forum||t(".m-facelink",r).removeAttr("href"),e.uploads=C(e.body.join("")),t(".m-post",r).data("post",e),t(".m-time",r).tooltip2({prefix:"m-",timeout:500}),e.user.is_admin&&t(".m-name",r).after(t("<span/>",{text:i.admin}).ac("admin")),e.root=r.mousemoved(),e.on("reload",e.is_new,function(){r.tc("is-new",e.is_new)}),t(".m-body",r).on("render",function(){function o(t){a.html(moot.format(e.body,t,s)),r.tc("closed",!t).tc("opened",t),l.html((t?i.less:"")+"&hellip;"),n.emit("format",a,e)}var a=t(this),r=a.parent(),l=t(".m-show-all",r),c=e.is_expanded;a.html(moot.format(e.body,c,s)),n.emit("format",a,e),(e.has_more||e.body[1])&&(r.ac("expandable "+(c?"opened":"closed")),l.html((c?i.less:"")+"&hellip;").click(function(){e.is_loaded?o(!e.is_expanded):l.ac("loading"),e.toggle(!e.is_expanded)})),e.on("more",function(){l.rc("loading"),o(!0)})}).trigger("render"),t(".m-heart",r).each(function(){function o(o,n){arguments.length||(o=e.like_count,n=!!e.is_liked);var r=o;n&&(o--,r=o?"+"+o:""),s.text(n?i.unlike:i.like),a.tc("has-likes",!n&&o>0).tc("is-liked",n).toggle(!!o||n),t("strong",a).text(o?r:"")}var a=t(this),s=t(".m-like",r),c=t(".m-like_list",r).active2("m-");s.click(function(){if(l.is_logged){var t=!e.is_liked;o(e.like_count+(t?1:-1),t),e.likeToggle()}}),e.on("like unlike spam reload",!0,function(i){o(),"inline"!=i&&a.mootboost(900),"spam"==e.flag&&s.remove(),n.user.is_admin||"inline"==i&&!e.is_liked||t(".m-remove",r).remove()}),a.click(function(){e.moot.is_expanded&&(a.ac("loading"),c.empty(),e.whoLikes(function(e){var o=a.rc("loading").offset();t.each(e,function(){c.append(p(n.is_forum?"face":"img",{user:this}))}),c.trigger("open").css({opacity:0}),setTimeout(function(){var e=o.left,t=c.outerWidth()/2,n=o.left>t;n&&(e+=a.outerWidth()/4-t),c.tc("edged",!n).css({opacity:""}).offset({top:o.top-c.outerHeight()-a.outerHeight()/2,left:e},10)})}))})}),e.on("reload",!0,function(){t(".m-remove",r).each(function(){var o,a=t(this).tooltip2({prefix:"m-"}),s=t("<span>"+i.thanks+"</span>").ac("thanks"),d=1e3*60*et-Math.max(0,+new Date-e.time),u=e.user.path==l.path,m=e.removable(),f=t(".m-tooltip",a),g=t(".m-icon",a);a.toggle(l.is_logged),l.is_admin?(f.text(i.removepost),g.text("x")):m?(u&&d>0&&(g.text("i"),o=setInterval(function(){f.text(i.removepost+" "+v(d/1e3)),d-=1e3,0>o&&clearInterval(o)},1e3)),setTimeout(function(){u?a.remove():(m=!1,f.text(i.mark))},d)):((e.flag||e.is_own)&&a.hide(),f.text(i.mark),g.text("!")),a.off("click").click(function(o,l){if(o.preventDefault(),!u&&!l){var c=t(p("prompt")).appendTo(n.root).active2("m-").trigger("open");return t(".m-h2",c).text(i[m?"removepost":"mark"]+"?"),window!=window.parent&&(c.css({position:"absolute",height:t(document).outerHeight()}),t(".m-panel",c).css({marginTop:t(o.target).offset().top-50})),t("button, a",c).click(function(){c.remove()}).filter("button").click(function(){a.trigger("click",[!0])})}m?(r.ac("loading"),e.remove(function(){l||r.remove()})):(a.parent().append(s),e.spam(function(){setTimeout(function(){s.remove()},2e3)}))}),l.is_admin||!e.is_own&&!e.flag||c.remove(),c.off("click").click(function(){e.unspam(function(){a.remove(),c.replaceWith(s),setTimeout(function(){s.remove()},2e3)})})})}),e.on("spam unspam",e.spam_level,function(o,n){var a=n>=1;r.tc("is-spam",a),e.is_seed&&e.moot.root.tc("is-spam",a),a&&!r.hc("is-spam")&&t(".m-body",r).trigger("render")}).on("remove",function(){r.fadeOut(function(){r.remove()})}),r}function x(e,o){var n=t("textarea",e),a=n.eq(0),i=n.last();moot.language,n.placeholder2("m-").keydown(function(o){var n=o.which;return 27==n?a.trigger("away").blur():(13==n&&(o.ctrlKey||o.metaKey)&&(o.preventDefault(),t("button",e).click()),void 0)}).focus(function(){t(document).one("mousedown",function(o){t(o.target).closest(e)[0]||a.trigger("away")})}).keypress(function(t){String.fromCharCode(t.which)&&o.user.type(a.val()+i.val(),e.closest(".m-moot").data("moot"))}),i.keydown(function(e){var t=e.which,o=this,n=o.selectionStart,a=o.value;9!=t||!n||e.ctrlKey||e.shiftKey||(e.preventDefault(),o.value=a.substring(0,n)+"   "+a.substring(o.selectionEnd),o.focus(),o.selectionEnd=n+3),86==e.which&&(e.ctrlKey||e.metaKey)&&setTimeout(function(){i.keyup().keydown()},50)});var r=t(".m-help",e).active2({prefix:"m-",trigger:t(".m-show-help",e)},function(){n[1]||r.css({top:-r.outerHeight()-10})});t.cookie2("moot.tip")||a.one("click",function(){r.trigger("open"),t.cookie2("moot.tip",1)}),a.trigger("away"),_(e,a,i,o),T(e,i,o)}function _(e,a,r,l){var s=e.hc("create"),c=t(p("preview")).appendTo(e).ac(s?"seed":"reply"),d=t(".m-title",c),u=t(".m-body",c),m=t(".m-name",c),f=moot.language,g=l.user,h=u.parent(),v=u.next().html("&hellip;");g.on("login logout",!0,function(){t(".m-face",c).attr("src",g.img),m.text(g.displayname),g.is_admin?m.after(t("<span/>",{text:f.admin}).ac("admin")):m.next(".m-admin").remove()}),a.keyup(function(){e.tc("filled",!!a.val())}),l.conf().show_title&&s&&a.keyup(function(e){if(-1==t.inArray(e.which,nt)){var a=o(i(n(moot.fixTitle(this.value),!1)));d.html(a)}}),r.keyup(function(e){if(-1==t.inArray(e.which,nt)){var o=t(this).val(),n=h.hc("opened"),a=moot.fixBody(o,!n),i=!!a[1]||n;u.html(moot.format(a.slice(0,n?2:1))),l.emit("format",u,{uploads:C(a.join(""))}),h.tc("expandable",i)}}),a.add(r).keydown(function(e){if(86==e.which&&(e.ctrlKey||e.metaKey)){var o=t(this);setTimeout(function(){o.trigger("keyup")},10)}}),v.click(function(){h.tc("closed opened"),v.html((h.hc("opened")?f.less:"")+"&hellip;"),r.triggerHandler("keyup")}),a.on("away",function(){a.add(r).trigger("keyup")})}function T(e,o,n){function a(n){n.preventDefault();var a=n.target.files||n.originalEvent.dataTransfer.files||[];t.each(a,function(n,l){var c=/image/.test(l.type),d=4e6>l.size;if(c&&d){s.hide();var u=new FileReader;u.onload=function(e){var i=l.name.replace(/[^\w\.]/g,"").toLowerCase(),s=l.name.split("."),c=s[0],d=at[i];if(l.altname=i,l.data=e.target.result,d&&d.data!=l.data&&(c=s[0]+"-"+n,i="file_"+n+i,l.altname=i),o[0].value+=" ["+c[0].toUpperCase()+c.slice(1)+"]("+i+")",at[i]=l,n==a.length-1){var u=t.trim(o.val())+" ";o.keyup().focus().val("").val(u)}r.val("")},u.readAsDataURL(l)}else s[0]||(s=t("<div/>").ac("tooltip imgtip").prependTo(e)),s.show().text(c?i.max:i.img_needed)})}if(n.conf().upload===!1&&(it=!1),it){var i=moot.language,r=t("<input/>",{type:"file",multiple:"multiple",accept:"image/*"}).ac("hidden").appendTo(e),l=t("<a/>",{title:i.upload}).ac("post-upload").append("<em>U</em>"),s=t(".m-imgtip",e);l.prependTo(t(".m-controls",e)).tooltip2({prefix:"m-",position:"topleft"}),r.change(a),l.click(function(){r.click()}),e.on("drop",a).on("dragover dragleave drop",function(t){t.preventDefault(),e.tc("dragged",/over/.test(t.type))})}}function C(e){var t=[];return it&&e&&e.replace(X,function(e,o,n){var a=at[n];a&&t.push(a)}),t}function j(e){return e&&e.replace(/["']/g,"")}function z(e){var t=ct.css({fontFamily:"'"+e+"'"}).appendTo("body").width();ct.css({fontFamily:"'"+e+"', monospace"});var o=t==ct.width();return ct.remove(),o}var A={logo:'<a id="rnd211" href="https://moot.it/" target="_new">0</a>',start:'<div id="mt-start"><div id="mt-head"><a href="https://moot.it/">M</a> – <r>forums</r> and <r>commenting</r> for your site </d><div id="mt-body"><d> Start your own forum now. It&#39;s <r>free</r> and <r>unlimited</r>. </d><d"tooltip"></d><f><input type="text" name="name" placeholder="Your forum name" maxlength="40" autocomplete="off"><b>Create</b></f></d><div id="mt-foot"><r>Free account</r> – <a href="https://moot.it/upgrade/">upgrade</a> (and remove this dialogue) </d></d>',ban:'<a"ban">Ban user</a><f"banned"><s"badge">Banned <a"unban">x</a></s><l"ban-days"><input type="text" value="7"> Days</l><l"forever"><input type="checkbox"> Forever</l></f>',online:'<d"users"><d"h3 users-title">{l.online}<em/></d><d"logged-users"/><d"anon-count"/></d>',forum:'<d"header"><d"wrap"><d"table"><d"navi"><a"nav-feed" href="#!/feed"><s>{l.feed}</s><em"newcount"/></a><a"nav-all" href="#!/"><s>{l.all}</s><em"newcount"/></a><a"nav-forums"><s>{l.forums}</s></a><a"nav-online"><s>{l.online}</s><em/></a></d><d"subnavi"><d"search" id="m-search"><input type="text" name="q" placeholder="{l.search}"></d> @account; </d></d></d></d><d"wrap"> @page; <d"sidebar"><d"forums-wrap"><d"h3 forums-title">{l.forums}</d><d"forums links"/><d"custom links"/><d"admin-area"/></d></d></d>@logo;',commenting:'<d"comment-head"><d"comment-meta"><d"seed"><a"action heart"><s>a</s><strong/></a><a"like"/><a"follow"><s"icon">e</s><strong/></a></d><d"like_list"/> @account; </d><d"comment_count"/></d>@page;@logo;',threaded:"@account;@page;@logo;",page:'<p"message"/><d"page"><d"pagetitle"><div/></d><s"loading-text">{l.loading}</s><d"form create"> @help; </d><p"collapse-all"><a><em"icon">u</em> {l.collapse}</a></p><d"list"/><b"more-moots button"/></d>',navi:'<p><a href="{href}">{title}</a></p>',admin:'<d"h3 manage-title">{l.manage}</d><d"links"><p><a"nav-settings">{l.settings}</a></p><p><a"nav-spam" href="#!/spam">{l.spam}</a></p><p><a"nav-designer">Design</a></p><!-- <p><a"nav-banned">Banned users</a></p> --></d><d"subs"><d"h3 subs-title">{l.subs}</d><d"links"><p"yup">{l.basic}</p><p"sub-branding">{l.designer}</p><p"sub-sso">{l.developer} <s"badge">NEW!</s></p></d><a"button" href="https://moot.it/upgrade/" target="_new">{l.upgrade_link}&hellip;</a></d>',gallery:'<div id="m-gallery"><a"close">x</a><nav id="m-navi"/><div id="m-media"><img id="m-img"/><div/></d></d>',browser:'<d"h2">{l.slogan}</d><a href="https://moot.it"><img src="//moot.it/m/img/home/allscreensizes.png"/></a><p><a href="http://browsehappy.com/">{l.upgrade}</a> {l.upgrade2}</p>',unverified:'<p"msg unverified"><em>{l.unver1}</em> {l.unver2}</p>',img:'<i"face" src="{user.img}" title="{user.displayname}">',face:'<a"facelink" href="#!/{user.path}" data-href="#!/{user.path}" title="{user.displayname}">@img;</a>',growl:'<d"growl"><a"destroy">x</a><d"entries"/></d><s"growlicon">L</s>',event:'<d"entry" data-path="{path}"> @face; <d"data"><d"meta"><r"name">{user.displayname}</r><s"time" data-time="{time}" title="{fullTime}">{prettyTime}</s></d><a"link">{title}</a></d></d>',help:'<a"show-help">?</a><d"help"><a"close">x</a><d"help-format"><d"help-bolded">*<s>{l.bold}</s>* ({l.single})</d><d"help-italics">_<s>{l.italics}</s>_</d><d>&gt; <s>{l.help3}</s></d><d"help-monospaced">`<s>{l.monospaced}</s>`</d><d>[<s>{l.title}</s>](<s>{l.link}</s>)</d></d><d"help-code"><d>&#45;&#45;&#45;</d> {l.help5} <d>&#45;&#45;&#45;</d><d>&#45;&#45;&#45; html</d> &lt;p&gt;{l.help6}&lt;/p&gt; <d>&#45;&#45;&#45;</d></d><d"help-post"><em>ctrl</em> + <em>&crarr;</em><s>&nbsp; {l.help2}</s></d></d>',meta:'<d"meta"><s"name">{user.displayname}</s><a"time" data-time="{time}" title="{fullTime}">{prettyTime}</a><s"cat"/><s"spammed">{l.spam}</s><s"actions"><s"reply_count"/><a"action heart"><s>a</s><strong/></a><a"follow"><s"icon">e</s></a><a"action remove" title="{l.removepost}"><s"icon">x</s><s"tooltip"></s></a></s></d><d"like_list"/>',body:'<d"body-wrap"><d"body"/><a"show-all"/><a"action like"/><a"action unspam">{l.unspam}</a></d>',seed:'<d"seed"> @face; <d"post"> @meta; <a"permlink" title="{l.fullview}"><em>7</em></a><d"title"></d> @body; </d></d>',reply:'<d"reply"> @face; <d"post"> @meta; @body; </d></d>',prompt:'<d"mask prompt"><d"panel"><d"h2"/><b>{l.yes}</b><a>{l.cancel}</a></d></d>',more:'<d"head"/><d"get-replies"><a"to-head button" title="{l.show_old}"/><a"to-tail button" title="{l.show_more}"><em/></a></d><d"tail"/>',preview:'<d"preview expanded"><d"facelink"><i"face"><s"typing"/></d><d"post closed"><s"preview-title">{l.preview}</s><d"meta"><s"name"/><s"time">{l.now}</s></d><d"title"/> @body; </d></d>',moot:'<d"moot"><d"replies"/><d"form replyform"> @help; <t"postinput" rows="1" placeholder="{l.reply}"/><d"controls"><button title="{l.enter}">{l.replybtn}</b></d><d"writing"/></d></d>',writing:'<d"facewrap"> @img; <em"typing"/></d><s>{user.displayname} {l.writing}</s>',create:'<d"input-wrap"><t"input-title" rows="1"></t><t"input-body" rows="1"></t></d><d"controls"><d"select"><l>{l.select}</l><d"options"><r>{l.select}</r><ul/></d><input/></d><button title="{l.enter}"/></d>',no_title:'<t"postinput" rows="1" placeholder="{l.comment}"/><d"controls"><button title="{l.enter}"/></d>',account:'<d"nav-account"><a"login">{l.login}</a><a"me"><s"myname"/><em"down">5</em>@img; </a></d>',account_overlay:'<d"account overlay"><a"close">x</a><i"face"/><f"upload" target="m-upload" title="{l.avatar}"><input type="file" name="img" size="1"><b>x</b></f><d"names"><d"h3"><strong/> &bull; <a"logout">{l.logout}</a></d><d"h2"/><p"status"><s>o</s><em/> &bull; <a/></p></d><f><d"h3">{l.name}</d><s"error"/><input type="text" class="m-input" name="displayname" maxlength="50"><p>{l.nametip}</p></f><f><d"email-updated"><d"h3">{l.step}</d><p>{l.step1}</p></d><d"field email"><d"h3">{l.email}</d><s"error"/><input name="email" class="m-input" type="email" maxlength="100"><p>{l.emailtip}</p></d></f><p"unfollow"><s>e</s><em/> &bull; <a>{l.unwall}</a></p><l"maillist"><input type="checkbox"/> {l.notify} <em>{l.saved}</em></l><p"password"><a>{l.changepw}</a></p></d>',join:'<d"mask join-mask"><d"panel moot-join"><d"h2">{l.welcome}!</d><p>{l.welcome1}</p><b>{l.later}</b></d></d>',social_join:'<d"mask join-mask"><f"panel join"><i"face" /><d"h2">{l.welcome}, <span/>!</d><d"h3">{l.welcome2}</d><l"field username"><input name="username" class="m-input" required="required" placeholder="your-username" maxlength="40"><em"tip">{l.unametip}</em></l><l"terms"><input type="checkbox" name="terms" required="required" /> {l.terms} </l><p><button disabled>{l.join}</b></p></f></d>',confirm_password:'<d"h2">{l.changepw}</d><br><p><b>{l.change}</b></p>',confirm_email:'<d"h2">{l.c_email}</d><d"h3"/><p><b>{l.ok}</b></p>',confirm_account:'<d"h2">{l.c_acc}</d><d"h3">{l.c_acc1}</d><p><b>{l.ok}</b></p>',expired:'<d"h2">{l.expired}</d><p>{l.expired1}</p><p><b>{l.ok}</b></p>',confirm_error:'<d"h2"/><p><b>{l.ok}</b></p>'};t.fn.active2=function(e,o){e=t.extend({prefix:"is-"},"string"==typeof e?{prefix:e}:e);var n=e.prefix,a=n+"active",i=e.trigger||t(),r=t("body"),l=t(document);return this.each(function(){function e(){s.hasClass(a)&&(s.trigger("close"),l.off(".a2"))}var s=t(this);i.click(function(){s.trigger(s.hasClass(a)?"close":"open")}),s.on("open close",function(c){if(!c.isDefaultPrevented()){var d="o"==c.type[0];s.toggleClass(a,d),r.toggleClass(n+"overlaid",d),d&&(o&&o(s,i),l.on("mouseup.a2 keydown.a2",function(o){var n=t(o.target);n.closest(i)[0]||(27==o.which||"mouseup"==o.type&&!n.closest(s)[0])&&e()}))}}),t("."+n+"close",s).click(e)})},t.fn.autogrow=function(e){var o="minHeight,maxHeight,fontSize,fontFamily,lineHeight,fontWeight,padding".split(",");return this.each(function(){var n=t(this),a=n.next(".jqt-shadow"),i=n.is("textarea");n.one("keydown",function(){a=t("<"+(i?"div":"span")+"/>").attr("class","jqt-shadow").insertAfter(n),t.each(o,function(e,t){a.css(t,n.css(t))}),a.css({position:"fixed",top:"-9999em"}),i&&a.width(n.width())}).keydown(function(){setTimeout(function(){var t=n.val();a.html(t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(" ","&nbsp;"):"-"),i?n.height(a.outerHeight()+(t?e||0:0)):n.width(a.outerWidth())},1)})})},t.fn.changed2=function(){return t(":input[name]",this).change(function(){t(this).data("changed2",!0)}),this},t.expr[":"].changed=function(e){return!!t(e).data("changed2")},t.fn.toObject=function(){var e={};return this.each(function(){this.disabled||(e[this.name]=t(this).is(":checkbox")?this.checked:t(this).val())}),e},t.fn.mousemoved=function(e,o){e=e||"is-hover",o=o||3e3;var n,a=0,i=0;return"ontouchstart"in window?this.addClass(e):this.each(function(){var r=t(this);r.on("mouseenter mouseleave",function(l){if(!t(l.relatedTarget).data("skip-hover")){var s="mouseenter"==l.type;r.toggleClass(e,s),s?(r.on("mousemove.jqt",function(t){i-t.pageX&&(r.addClass(e),a=+new Date,i=t.pageX)}),n=setInterval(function(){+new Date-a>o&&(r.removeClass(e),a=+new Date)},1e3)):(r.off("mousemove.jqt"),clearInterval(n))}})})};var q="placeholder"in document.createElement("input");t.fn.placeholder2=function(e){return e=e||"",q?this:this.each(function(){var o=t(this),n=t("<span/>",{"class":e+"placeholder",text:o.attr("placeholder")});o.after(n).keyup(function(){o.parent().toggleClass(e+"filled",!!o.val())}),n.click(function(){o[0].focus()})})},t.fn.sel2=function(e,o){var n=e.prefix||"";return this.each(function(){function e(e){e=e||t("."+u,c),e.removeClass(u)}function a(e){r.trigger("select",[e]).trigger("close")}var i,r=t(this).active2(n),l=r.data("api"),s=t(document),c=t("div",r),d=n+"selected",u=n+"hovered";return l?l:(r.on("open",o).click(function(){r.trigger("open"),s.bind("keydown.s2",function(o){var n=o.which,i=40==n,r=t("."+u,c);(i||38==n)&&(r.length?(e(r),r=i?r.next():r.prev()):r=t("li:"+(i?"first":"last"),c));var l=String.fromCharCode(n);if(l&&"("!=l&&"&"!=l){var s=t("li",c).filter(function(){return t(this).text()[0].toLowerCase()==l.toLowerCase()}).eq(0);s[0]&&(e(),r=s)}if(r[0]){r.addClass(u);var d=r.position().top;(0>d||d>c.height())&&c.scrollTop(c.scrollTop()+(0>d?-1:1)*c.height()),(13==n||32==n)&&a(r)}o.preventDefault()})}),r.bind("close",function(){s.unbind("keydown.s2")}),r.on("select",function(e,o){"number"==typeof o&&(o=t("li",c).eq(o));var n=o.data("value");void 0===n&&(n=o.text()),t("."+d,c).removeClass(d),o&&o.addClass(d),r.toggleClass("is-defined",!!n),t("input",r).val(n).trigger("change"),t("label",r).html(o?o.html():n),r.data("value",n),i=n}),c.on("click","li",function(e){return a(t(e.target).closest("li")),!1}).on("mouseenter mouseleave","li",function(o){e(),t(o.target).toggleClass(u,/ee/.test(o.type))}),r.data("api",{val:function(e){return void 0!==e?a(t("li:contains("+e+")",r)):i},index:function(e){return void 0!==e?a(t("li",c).eq(e)):t("li",c).index(t("."+d,c))}}),void 0)})},t.fn.tooltip2=function(e){var o=e.prefix||"",n=o+"tooltip",a=o+"hovered",i=e.position;return"ontouchstart"in window?this:this.each(function(){var o,r,l,s,c=t(this),o=t("."+n,c);o[0]||(o=t("<span/>",{"class":n}).appendTo(c)),o.text(c.attr("title")),c.removeAttr("title").bind("mouseenter.tip2 mouseleave.tip2",function(d){var u=/ee/.test(d.type);if(o=t("."+n,c),u){l=c.outerWidth(),r=o.outerWidth(),s=setTimeout(function(){c.addClass(a)},e.timeout||0);var p="topleft"==i?1:2,m="left"==i?{top:0,left:-r}:"right"==i?{top:"35%",left:l+5}:{top:-o.outerHeight(),left:-(r/p)+l/p};o.css(m)}else c.removeClass(a),clearTimeout(s)})})};var $=/(^|\n)[-`]{3,} *(\w*)/g,S=/<(\/?)([^3><]+)(>?)/g,D=/\[#([^\/]+)\/#\]/g,O={"<3":"a",":D":"D",":-D":"D",":d":"D",":-d":"D",":)":")",":-)":")",";)":";",";-)":";",":O":"O",":-O":"O",":o":"O",":-o":"O",":0":"O",":-0":"O",":*":"*",":-*":"*",":|":"|",":-|":"|",":(":"(",":-(":"(",":P":"P",":-P":"P",":p":"P",":-p":"P",":/":"/",":-/":"/",":'(":"'",":'-(":"'","8)":"8","8-)":"8",">:(":">",">:-(":">",">:O":"<",">:-O":"<",">:o":"<",">:-o":"<",">:0":"<",">:-0":"<"},L="";for(var I in O)L+=I.replace(/(\)|\||\*|\(|\/)/,"\\$1")+"|";L=RegExp("(^|\\s)("+L.slice(0,L.length-1)+")","g");var H=/\.{3,}/g,F=/\"([^\"]+)\"/g,E=/\s\'([^\']+)\'/g,M=/\*([^\*]+)\*/g,U=/`([^`]+)`/g,N=/_([^_\]]+)_/g,R=/-{2,}/g,W=/ - /g;moot.format=function(e,o,a){var i,r=e.slice(0,o?2:1).join(""),s=r.split($),c=!0,d="";return t.each(s,function(e,o){if(0===(e+1)%3)return i=o;if(0===e%3&&(c=!c),o=t.trim(o),!o)return"";if(c)return d+=hilite2(t.trim(o.replace(D,"<mark>$1</mark>")),i,"m-");o=n(o,a),o=l(o);var r,s=(o+"\n").split("\n");t.each(s,function(e,o){o=t.trim(o),">"==o.slice(0,1)?(r||(d+="<blockquote>"),o=t.trim(o.slice(1)),r=!0):r&&(d+="</blockquote>",r=!1),(o||0!=e&&e!=s.length-1)&&(d+=o?t.browser.msie&&9>t.browser.version?o:"<p>"+o+"</p>":"<p class=m-empty/>")})}),d};var P={a:"a",b:"button",c:"code",d:"div",e:"fieldset",f:"form",i:"img",j:"iframe",l:"label",p:"p",r:"strong",s:"span",t:"textarea"};t.each(A,function(e,t){A[e]=s(t)});for(var B=0;2>B;B++)t.each(A,function(e,t){A[e]=t.replace(/\s*@(\w+);\s*/g,function(e,t){return A[t]})});var J,Q={};moot.tmpl=function(e,t){return t=t||{l:moot.language},u(s(e),t)};var X=/\[([^\]]+)\]\(\s*([^\)]+)\s*\)/gi,K=/https?:\/\//,G=/<\/?em>/g,Y=/https?:\/\/[^\s\"\']+(\')?/gi,V=/(jpe?g|png|gif)$/i,Z=["facebook.com","wikipedia.org/wiki","twitter.com","github.com","google.com","vimeo.com","youtube.com/watch?v","youtu.be","d.pr","dropbox.com"];moot("format",function(e){t(".m-link",e).each(function(){var e=t(this);if("m-link"==e.attr("class")){var o=e.attr("href").split("/").slice(0,3).join("/");e.removeAttr("class").ac("favlink").prepend(t("<img/>",{src:"//icon.moot.it/"+o}))}})}),window.atob=window.atob||function(e){var t,o,n,a,i={},r=0,l=0,s="",c=String.fromCharCode,d=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0;64>t;t++)i[u.charAt(t)]=t;for(n=0;d>n;n++)for(o=i[e.charAt(n)],r=(r<<6)+o,l+=6;l>=8;)((a=255&r>>>(l-=8))||d-2>n)&&(s+=c(a));return s},t.each(["add","remove","toggle","has"],function(e,o){t.fn[o[0]+"c"]=function(e,t){return this[o+"Class"]("m-"+e.split(" ").join(" m-"),t)}}),t.fn.mootslide=function(e,o){return e=e||100*et,this.each(function(){var n=t(this),a=n.css({opacity:0}).outerHeight();n.height(0).animate({height:a},e).animate({opacity:1,queue:!0},e,function(){n.css({height:"",opacity:""}),(o||t.noop)()})})},t.fn.mootboost=function(e){return this.each(function(){var o=t(this);o.ac("boosted"),setTimeout(function(){o.rc("boosted")},e||500*et)})};var et=2.718;moot(function(e){function o(e){i.tc("has-message","string"==typeof e),t(".m-message",i).text(e),e&&e.stack&&console.error(e.stack)}var n,i=e.root,r=e.conf(),l=moot.language;if(e.is_stub){if("available"!=e.forumAvailable)return i.empty();if(!/moot.it/.test(location.host))return i.html(e.name+" "+l.notexist+' <a style="display:block" href="https://moot.it/'+e.name+'">'+l.setup+" &raquo;</a>"),!1}t.each(["forum","threaded","commenting"],function(t,o){e["is_"+o]&&i.html(p(o,{user:e.user})).addClass("is-"+o)}),e.is_threaded&&r.show_online&&i.prepend(p("online")),location.hash.split("#!")[1]&&e.on("load",function(o){var n="unread"==e.page.extra?t(".m-reply:last.m-is-new:first, .m-replies > :last",i):i;o.is_init&&n[0]&&t("html, body").animate({scrollTop:n.offset().top-30},300)}),setInterval(function(){t("[data-time]",i).each(function(){var e=t(this),o=e.data("time"),n=t("span",e);o&&e.html(c(o)+(n[0]?n[0].outerHTML:""))})},1e4*et),e.on("error",o).on("waiting",function(e,t){t.on("progress",function(e){o(l.progress[e]),3==e&&(n=setTimeout(o,1e3))}).done(function(){clearTimeout(n),o()})}).on("destroy",function(){i.empty()}),e.channel.on("close reconnect",!0,function(e){o("close"==e?l.reconnect:"")}).on("type",function(e){e.img?e.displayname=a(e.displayname):(e.img="//i2.wp.com/cloudinary-a.akamaihd.net/moot/image/upload/t_d2-avatar/v1364433564/moot.jpg?ssl=1",e.displayname=l.someone)}),e.is_commenting&&(t(".m-create",i).remove(),i.on("click","a[href^='#!']",function(e){e.preventDefault()}))}),moot(function(e){function o(){e.is_commenting||setTimeout(function(){var o=t.grep(e.page,function(e){return e.is_expanded});r.parent().tc("shown",o.length>0)},1)}var n=e.root,a=t(".m-list",n),i="created",r=t(".m-collapse-all a",n).click(function(){e.page.collapse()}),l=t(".m-more-moots",n).click(function(){e.page.more()});e.is_commenting&&r.parent().remove(),e.on("before:load",function(n){l.hide(),n.on("load more",function(e){l.text(n.available).css("display",n.available>0?"block":"none"),o(e)}).on("before:more more",function(e){l.tc("loading","more"!=e)}).on("before:moot",function(e){w(e,n).prependTo(a),e.root.ac(i)}).on("moot",function(r,l){if(r.root&&r.root.hc(i))setTimeout(function(){r.root.rc(i)},500*et);else if(l){var s=w(r,n).prependTo(a);r.from_channel&&s.mootslide()}else w(r,n).appendTo(a);r.on("expand collapse",o);var c=r.page;"moot"==n.type&&c.title&&!e.is_commenting&&t("<a/>",{text:c.title}).ac("back").appendTo(a).click(function(){e.load(c.path)}),e.emit("topic",r,l)}).on("remove",function(e){e.root.fadeOut(function(){e.root.remove()})})})}),moot(function(e){function o(e){var t=e.split("@"),o="#!/"+(t[1]?"@"+t[1]:e.split("/").slice(2).join("/"));return o}function n(e,o){t(".m-newcount",e).css({display:o>0?"inline-block":"none"}).text(o)}if(!e.is_commenting){var a=e.root,i=e.user,r=moot.language,l=t(".m-header",a),s=t(".m-page",a),c=t(".m-sidebar",a),d=(t(".m-navi",a),t(".m-nav-feed",a)),u=t(".m-forums-wrap",c),m=t(".m-forums",u),f=t(".m-forums-title",u),g=t(".m-custom",c),h=t(".m-nav-all",a),v=t(".m-list",a),b=t(".m-pagetitle div",a);if(a.on("click","a[href^='#!']",function(o){if(!e.is_forum&&t(o.target).hc("face"))return!1;if(!o.metaKey&&!o.ctrlKey){o.preventDefault();var n=t(this),a=n.attr("href").slice(3);("feed"!=a||i.is_logged)&&(n.ac("loading"),e.load(a))}}),u.active2({prefix:"m-",trigger:t(".m-nav-forums",l)},function(e,t){var o=t.offset();e.offset({top:o.top+t.outerHeight()+10,left:o.left-(e.outerWidth()-t.outerWidth())/2})}),i.on("login logout",!i.is_logged,function(){d.attr("title",i.is_logged?"":r.login1)}),e.html){g.html(e.html);var y,w=[];t("a",g).each(function(){var n=t(this),a=n.attr("href");if(!a||"#!/"==a.slice(0,3)){var i=e.path+"/"+(a?a.slice(3):moot.urlify(n.text())),r={title:n.text(),path:i,href:o(i)};n.replaceWith(p("navi",r)),delete r.href,i.split("#")[1]||n.hasClass("non-category")||(e.getCategory(i)||(y=!0),m.add(f).remove(),w.push(r))}}),w.length&&w.length!=e.categories.length&&(y=!0),i.is_admin&&y&&e.setCategories(w),t(".moot-footer",g).remove().appendTo(c)
}m[0]?e.on("categories",e.categories,function(n){n=n||e.categories,m.empty(),t.each(n||[],function(e,n){n=t.extend({},n,{href:o(n.path)});var a=t(p("navi",n)).appendTo(m);t("a",a).tc("has-new",!!n.has_new)})}):f.remove(),u.on("click",".m-links a",function(){u.trigger("close")}),e.on("before:load",function(n){v.empty().ac("loading"),a.attr("class",t.trim(a.attr("class").replace(/m-\w+page/,""))),a.rc(e.page.type+"page"),b.html(r.loading).css("display",""),t(".m-selected",a).rc("selected"),t("[href='"+o(n.path)+"']",a).add(s).ac("loading")}).on("load",function(e){var n=t("#m-search input",a),i=e.title;v.rc("loading"),a.ac(e.type+"page"),b.text(i),t(".m-loading",a).rc("loading has-new"),t("[href='"+o(e.path)+"']",a).ac("selected"),n.on("focus blur",function(e){n.closest(".m-subnavi").tc("focus","f"==e.type[0])}),"search"==e.type?(e.length?(e.old_query&&b.html(r.showing+" &ldquo;<strong>"+i+"</strong>&rdquo;"+"<em>"+r.noresults+" &ldquo;"+e.old_query+"&rdquo;"),e.suggestion&&b.html("<strong>"+i+"</strong>"+"<em>"+r.mean+" <a href='#!/?"+e.suggestion+"'>"+e.suggestion+"</a>?")):b.html(r.noresults+" &ldquo;<strong>"+i+"</strong>&rdquo;"),n.val()!=b&&n.val(i).keyup()):n.val(""),e.size||"spam"!=e.type||b.append("<em>"+r.nospam+"</em>")}),i.on("newcount",function(e){n(d,e.feed),n(h,e.all),e.all||t(".m-has-new",c).rc("has-new")}),t("#m-search",l).each(function(){var o=t(this),n=t(":input",o).placeholder2("m-");n.keyup(function(o){if(13==o.which){var n=t.trim(this.value);n&&e.search(n)}}),t(".m-placeholder",o).click(function(){n.focus()})}),history.pushState&&(e.on("load",function(e){var t=e.path,n=o(t),a=location.hash.split("::")[0];e.is_init||"/"!=t[0]||n==a||history.pushState(null,null,n)}),t(window).on("popstate",function(){var t=unescape(location.hash.split("#!/")[1]||"");(t||e.page.path!=e.path)&&(e.page.is_init||e.load(t))}))}}),moot(function(e){if(!e.conf().show_title){var o=t(".m-create",e.root).append(p("no_title")),n=t("textarea",o).autogrow(10),a=moot.language,i=e.user,r=t("button",o);x(o,e),i.on("login logout",!0,function(){r.text(i.is_logged?a.post:a.login_and+" "+a.post.toLowerCase())}),n.on("focus away",function(e){o.tc("focused","f"==e.type[0]||!!n.val())}),r.click(function(o){o.preventDefault();var r=t.trim(n.val()),l={title:r.slice(0,27),body:r},s=C(r);r&&i.is_logged&&(n.val("").trigger("away").trigger("keydown").blur(),s[0]&&(l.files=s),e.create(l).fail(function(o){t(".m-created",e.root).remove(),n.val(r).focus(),root.prepend(t("<div/>").ac("err tooltip").text(a.error)),l.error=o,e.log("error comment:failed",l)}))})}});var tt=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),ot=80;moot(function(e){function o(){return g.is(":visible")&&!g.data("value")?(g.click(),u.prop("disabled",!0),g.one("select",function(){u.prop("disabled",!1).click()}),!1):!0}function n(o,n){t(".m-created",e.root).remove(),r.val(o.title).focus(),l.val(o.body);var i="duplicate"==n.message?"Duplicate title":n.message?s.no_title:s.error;a.prepend(t("<div/>").ac("err tooltip").text(i)),o.error=n,e.log("error create:failed",o)}if(e.conf().show_title){var a=t(".m-create",e.root).append(p("create")),i=t("textarea",a),r=i.eq(0).autogrow(),l=i.eq(1).autogrow(1),s=moot.language,c=window.getSelection,d=e.user,u=t("button",a),m=e.conf();if(d.on("login logout",!0,function(){u.text(d.is_logged?s.post:s.login_and+" "+s.post.toLowerCase())}),e.is_sso&&!d.is_logged){var f=m.login_url?t("<a/>").attr("href",m.login_url):t("<div/>");return a.html(f.ac("sso-link").text(s.login_and+" "+s.start.toLowerCase()))}i.on("focus away drag",function(e){var t="f"==e.type[0],o=!!r.val();o||(r.attr("placeholder",s[t?"title":"start"]),l.attr("placeholder",t?s.body:"")),a.tc("focused",t||o||!!l.val())}).trigger("away"),x(a,e),r.keydown(function(e){if(!(""+(c&&c()))){var o=e.which;if(tt)return 13==o?!1:0;if(e.metaKey||e.ctrlKey)86==e.which&&setTimeout(function(){var e=t.trim(r.val()).split("\n"),o=e[0];o.length>ot&&(e[1]=o.slice(ot)+e[1],o=o.slice(0,ot)),r.val(o).keyup().keydown(),l.val(e.slice(1).join("\n")).keyup().keydown()},50);else{var n=this.value.length;if(13==o||n==this.selectionStart&&39==o||40==o)return l.focus(),!1;8!=o&&39!=o&&n>=ot&&l.focus()}}}),l.keydown(function(e){if(!(""+(c&&c()))){var t=e.which,o=this.selectionStart,n=this.value.substr(0,o).split("\n").length;return 1==n&&38==t||(37==t||8==t)&&!o?(r.focus(),!1):void 0}});var g=t(".m-select",a);e.on("categories",!0,function(){var o=t("ul",g).empty();t.each(e.categories||[],function(e,n){o.append(t("<li/>",{"data-value":n.path,text:n.title}))}),g.sel2({prefix:"m-"})}).on("before:load",function(e){t("li[data-value='"+e.path+"']",g).click()}),u.click(function(s){if(s.preventDefault(),t(".m-tooltip",a).remove(),d.is_logged&&o()){var c=t.trim(l.val()),p={path:g.data("value"),title:r.val(),body:c},m=C(c);if(m[0]&&(p.files=m),e.is_forum&&"page"==e.page.type&&p.path!=e.page.path)return e.load(p.path,function(){u.click()});try{e.create(p,function(){i.val("").trigger("away").blur()}).fail(function(e){n(p,e)})}catch(s){n(p,s)}}})}});var nt=[16,27,33,34,35,36,37,38,39,40,45,91];moot(function(e){e.channel.on("close reconnect",function(o){var n="c"==o[0];t("button, textarea",e.root).prop("disabled",n)})}),moot("topic",function(e){var o=t(".m-form",e.root),n=t("textarea",o).autogrow(1),a=t("button",o),i=moot.language,r=e.app,l=r.user,s=r.conf(),c=r.is_commenting?i.post:i.replybtn;if(l.on("login logout",!0,function(){a.text((l.is_logged?"":i.login_and+" ")+c)}),r.is_sso&&!l.is_logged){o.html("<div class='m-writing'/>");var d=s.login_url?t("<a/>").attr("href",s.login_url):t("<div/>");return o.append(d.html(c+"&hellip;").ac("sso-link"))}x(o,r),n.on("focus away",function(e){o.tc("focused","f"==e.type[0]||!!n.val())}),e.seed.is_stub&&(n.attr("placeholder",e.replies.length?i.comment:i.comment1),e.one("reply",function(){n.attr("placeholder",i.comment)})),a.click(function(a){a.preventDefault(),t(".m-imgtip",o).hide();var s=t.trim(n.val()),c={body:s},d=C(s);s&&l.is_logged&&(n.val("").trigger("away").trigger("keydown").blur(),d[0]&&(c.files=d),e.reply(c,function(){t(":file",o).val("")}).fail(function(a){t(".m-created",e.root).remove(),n.val(s).focus(),o.prepend(t("<div/>").ac("err tooltip").text(i.error)),r.log("error reply:failed",{moot:e.path,body:s,error:a})}))})});var at={},it="FormData"in window&&"File"in window;moot("load",function(){at={}}),moot(function(e){function o(i,r){if("undefined"==typeof _gat){if(n)return;return n=!0,t.getScript("//google-analytics.com/ga.js",function(){o(i,r)})}var l=_gat._createTracker(a);l&&l._trackEvent("Moot: "+i,r,e.user.path||"anonymous")}var n,a=e.analytics&&e.analytics.ga;a&&(e.channel.on("login join",function(){setTimeout(function(){o("login",e.page.path)},10)}),e.on("before:load",function(e){e.one("load",function(){o("load",e.title),"moot"==e.type&&o("topic",e.title)}),e.on("before:moot",function(e){o("post",e.seed.title)}).on("moot",function(e){e.on("load before:reply like",function(t){"load"==t&&(t="topic"),"before:reply"==t&&(t="post"),o(t,e.seed.title)})})}))});var rt;moot(function(e){function o(e,t){document.title=e.displayname+" "+t,setTimeout(function(){document.title=rt},a)}rt||(rt=document.title||t("title").text()||"");var n=e.is_forum,a=(e.user,1e3*et);e.channel.on("moot reply",function(e,t){t.seed&&(t=t.seed),t.path&&o(t.user," – "+(t.title||t.body[0]).slice(0,32))}).on("type",function(e){o(e,moot.language.writing)}),n&&e.on("load",function(e){e.title&&(document.title=e.title+" | "+rt)})});var lt=".m-image, .m-youtube-link, .m-youtu-link, .m-vimeo-link";moot(function(e){var o;t(".m-page",e.root).on("click",lt,function(e){var n=t(e.target);if(!n.hc("vimeo-link")||parseInt(n.attr("href").split("/")[3])){e.preventDefault();var a=t("#m-gallery");a[0]||(a=t(p("gallery")).appendTo("body")),o||(o=a.active2("m-"));var i=t("#m-navi",a).empty(),r=t("#m-media"),l=t("iframe",r),s=t("img",r),c=t(lt,n.closest(".m-body"));n.closest(".m-moot"),c=c.filter(function(){var e,o,n=t(this),a=n.text(),c=t("<span/>").appendTo(i).html("<em>"+a+"</em>"),d=n.attr("href");if(/youtu/.test(n.attr("class"))){o=(d.split("?v=")[1]||d.split("/").slice(-1)[0]).split(/[&#]/)[0],e="//www.youtube.com/embed/"+o+"?autoplay=1";var u=/[#&]t=([^&$]+)/.exec(d);u&&(e+="&start="+u[1]),d="//i1.ytimg.com/vi/"+o+"/mqdefault.jpg"}else if(n.hc("vimeo-link")){if(o=d.split("/").slice(-1)[0],!parseInt(o))return!1;e="//player.vimeo.com/video/"+o+"?autoplay=1",t.getJSON("//vimeo.com/api/v2/video/"+o+".json?callback=?",function(e){d=e[0].thumbnail_small,c.css("backgroundImage","url("+d+")").attr("src",d)}),d=""}return at[d]&&(d=at[d].data),c.css("backgroundImage","url("+d+")").click(function(){t("span",i).rc("active"),t(this).ac("active"),l.attr("src",""),r.tc("is-video",!!e),t("div",r).text(a.length>10?a:""),e?(l[0]||(l=t("<iframe/>",{webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,frameborder:0,height:390,width:640}).appendTo(r)),l.attr("src",e)):s.attr("src",d)}),e&&c.ac("video"),!0}),i.toggle(c.length>1),a.one("open",function(){var e=t(window),o=t(document),l=window!=window.parent,s=Math.min(e.outerHeight(),screen.availHeight)-i.filter(":visible").outerHeight()-20;if(a.css({paddingTop:e.scrollTop(),height:o.outerHeight(),width:o.outerWidth()}),l){var c=400,d=e.outerHeight()-n.offset().top-c-100;0>d&&(c-=d),a.ac("on-iframe").css({paddingTop:n.offset().top-c})}r.css({height:s})}).one("close",function(){l.attr("src",""),s.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==")}),a.one("click",function(e){(e.target==a[0]||e.target==r[0])&&a.trigger("close")}),t("span",i).eq(c.index(n)).click(),a.trigger("open")}})}),moot(function(e){var r,l,s=e.root,c=t(p("growl")).appendTo(s),d=c.eq(0),u=c.eq(1),m=t(".m-entries",c);t(".m-destroy",c).click(function(){m.empty(),c.hide(),r=!0}),u.click(function(){c.show(),u.hide(),r=!1}),e.channel.on("moot reply",function(s,c){if(c){c.seed&&(c=c.seed);var f=e.page,g=f.find(c.path);if(!g||"moot"!=f.type&&!t(".m-focus",g.moot.root||1)[0]){var h=c.title||c.body&&c.body[0];h=h.replace(Y,function(e){return e.split("/").slice(-1)}).replace(X,function(e,t){return t}),h.length>=90&&(h=h.slice(0,90).slice(0,h.lastIndexOf(" "))+"&hellip;"),h=o(i(n(h)));var v={time:+new Date,user:c.user||c,title:h,path:c.path};v.user.displayname=a(v.user.displayname);var y=t(p("event",v)).prependTo(m);t(".m-link",y).click(function(){function t(){n.root.click(),setTimeout(function(){b(n.find(c.key).root)},500)}var o=f.find(c.path),n=o?o.seed?o:o.moot:f.find(c.moot.path);n?n.is_loaded?n.is_expanded?n.is_expanded&&b(o.root):t():n.load(t):f.path==c.moot.page.path?f.lift(c.moot.path,function(){c=f.find(c.path),c&&b(c.root)}):e.is_forum&&e.load(c.moot.path,function(){c=f.find(c.path),c&&b(c.root)})}),r?u.show().mootboost(200):(u.hide(),d.show().mootboost(200),clearInterval(l),l=setTimeout(function(){d.hide(),u.show()},1e3*et),d.one("mouseenter",function(){clearInterval(l)})),t(".m-entry",d).length>3&&d.ac("large")}}}).on("remove",function(e){t("[data-path='"+e.path+"']",d).remove(),t(".m-event",m)[0]||c.hide()})}),moot(function(e,o){function n(){d.fadeOut(100),t(document).off("click.m-logo")}function a(e){h.prop("disabled",!0),u.ac("active").html(e)}var i=e.root,r=t("#rnd211",i);if(window!=window.top&&i.hc("mobile"))return r.remove();if(r.attr("style","display: block !important"),!e.has_products){e.is_forum||r.text("1");var l,s,c=/^[a-zA-Z0-9\-]+$/,d=t(p("start")).appendTo(i),u=t(".m-tooltip",d),m=t("form",d),f=t("input",m),h=t("button",m);r.mouseover(function(){s=setTimeout(function(){d.fadeIn(200),t(document).on("click.m-logo",function(e){t(e.target).closest(d)[0]||n()})},200)}).mouseout(function(e){t(e.originalEvent.relatedTarget).closest("#mt-start")[0]||clearTimeout(s)}),f.on("focus blur",function(e){l="focus"==e.type}),d.mouseleave(function(){l||n()});var v;f.keyup(function(e){if(13!=e.which){var t=this.value,o=t||c.test(t);o?t&&u.rc("active"):a("Use numbers, letters or dashes")}}).one("keypress",function(){u.rc("active")}).keyup(function(){var e=t.trim(this.value);e.length>4&&v!=e&&(v=e,h.prop("disabled",!0),o.call("forumAvailable",e,function(){h.prop("disabled",!1),u.rc("active")}).fail(function(t){/taken/.test(t)?a('"'+e+'" is already reserved'):a('"'+e+'" is not available, please contact <em>info@moot.it</em>')}).always(function(){v=0}))}),m.submit(function(t){t.preventDefault();var o=this.name.value.toLowerCase(),i=o.length;return!c.test(o)||5>i?a("Type 5 characters or more"):(g("https://moot.it/"+o+"/?source="+e.name,900,800),n(),void 0)})}}),moot(function(e){function o(o){t("a.m-facelink",o).each(function(){var o=t(this).data("href")||t(this).attr("href");t(this).tc("online",!!e.getUser(o.slice(3)))})}e.on("before:load",function(e){e.on("moot",function(e){e.on("load more reply",!0,function(n,a){var i=a&&a.root||e.root;o(i),t(".m-like_count",i).on("open",function(){setTimeout(function(){o(t(".m-like_list",i))},500)})})})}),e.channel.on("enter leave",function(o,n){n&&t("a.m-facelink[href$='"+n.path+"']",e.root).tc("online","enter"==o)});var n=e.root,a=t(".m-nav-online",n),i=t(".m-users",n),r=moot.language;return e.conf().show_online===!1?a.remove():(i[0]||(i=t(p("online")).appendTo(t(".m-sidebar",n))),i.active2({prefix:"m-",trigger:a},function(e,t){var o=t.offset();e.offset({top:o.top+t.outerHeight()+10,left:o.left-i.outerWidth()+t.outerWidth()-10})}),e.on("reload",!0,function(){function o(e){return t("[href*='"+e.path+"']",a)}function n(e){var n=o(e);return n[0]||(n=t(p("face",{user:e})).tooltip2({prefix:"m-"}).appendTo(a),e.is_admin&&(n.ac("is-admin"),t(".m-tooltip",n).append("<em> ("+r.admin+")</em>")),t("img",n).removeAttr("title")),n}var a=t(".m-logged-users",i).empty(),l=t(".m-users-title em",i).add(t(".m-nav-online em",e.root)),s=t(".m-anon-count",i);a.on("click","a",function(){i.trigger("close")}),e.channel.on("enter",function(e){e&&n(e).mootboost(500)}).on("leave",function(e){e&&o(e).fadeOut(function(){t(this).remove()})}).on("away return",function(e,t){o(t).tc("inactive","away"==e)}).on("type",function(e){var n=t("<em/>").ac("typing").appendTo(e.path?o(e):s);setTimeout(function(){n.remove()},1e3*et)}).on("enter leave away return",!0,function(){var t=e.online.length,o=e.anon_count;a.add(l).toggle(t>0),l.text(t),s.toggle(o>0).html((t>0?"+":"")+"<em>"+o+"</em> "+r[1==o?"anon_1":"anon"])}),t.map(e.online,n)}),void 0)}),moot(function(e){function o(e,o,n){if(a.test(e)){var i;return t(".m-facelink",n).filter(function(){var o=t(this).attr("href")||t(this).data("href");return o&&o.indexOf(e)>0}).each(function(){return i=t(".m-body p:contains('"+o+"'):first",t(this).next()),i[0]?!1:void 0}),i}}var n,a=/^@[a-z0-9\-]{5,}$/i;t(document).mousedown(function(e){n&&e.target!=n[0]&&n.hide()}).mouseup(function(e){setTimeout(function(){var o=t(e.target),a=window.getSelection,i=a?""+a():document.selection.createRange().text;a&&(a=a(),t(a.anchorNode).closest("p")[0]!=t(a.focusNode).closest("p")[0]&&(i="")),t.trim(i)&&!o.closest(".m-collapsed")[0]&&o.closest(".m-body, .m-title")[0]&&(n=t("#m-quote"),n[0]||(n=t("<a/>",{id:"m-quote",text:'"'}).data("skip-hover",!0).appendTo("body")),n.show().css({top:e.pageY-17,left:e.pageX+5}),n.unbind("click").click(function(){var e=t("textarea",o.closest(".m-moot")),a=o.closest(".m-post").prev(),r=(a.attr("href")||a.data("href")).slice(3),l=e.val();l&&(l+="\n"),l+="> "+r+"\n",l+="> "+i+"\n",b(e,10,function(){e.val(l).trigger("keyup").trigger("keydown");var t=e[0];t.focus(),t.selectionStart=t.selectionEnd=t.value.length}),n.hide()}))},1)}),e.on("format",function(e,n){t("blockquote",e).each(function(){var e=t(this),a=t("p:first",e),i=a.text(),r=t("p:gt(0)",e).text(),l=n.moot?n.moot.root:e.closest(".m-moot"),s=o(i,r,l);s&&(a.ac("user-path"),e.ac("quote").on("mouseenter mouseleave click",function(e){"click"==e.type?b(s):t("body").is(":animated")||s.tc("boosted",/ee/.test(e.type))}))})})});var st=/font-family:\s?['"]?([\w\s]+)['"]?;/,ct=t("<span/>",{text:"My F0n# T000 Str--ing"});moot.css={accent:".m-heart.m-has-likes span, .moot .m-button::after, .moot .m-show-help",accentbg:".moot button, .m-button",body:".moot .m-body, .m-input-body",boxes:".m-moot, .m-sidebar",button:".moot .m-button, .moot button",collapsed:".m-moot.m-collapsed .m-title",create:".moot .m-input-wrap",face:".m-face",header:".moot .m-header",headings:".moot .m-sidebar .m-h3, .m-pagetitle, .m-navi a",input:".m-focused .m-input-wrap, .m-focused.m-replyform textarea",moot:".moot",navi:".m-links",page:"body",para:".m-body p, .moot textarea",replies:".moot .m-replies",reply:".m-reply",selected:".m-navi a.m-selected, .m-pagepage .m-nav-forums, .m-userpage .m-nav-online",sidebar:".m-sidebar",title:".moot .m-title, .moot textarea.m-input-title",topic:".moot .m-moot, .m-create .m-input-wrap, .m-preview",wrap:".m-wrap, .m-tablet"};var dt={};moot.loadFont=function(e,o){if(dt[e]||z(e))return o&&o();dt[e]=!0,e=j(e.replace(/ /g,"+"));var n='<link href="//fonts.googleapis.com/css?family='+e+"\" rel='stylesheet'>";t(n).appendTo("head").load(o)},moot(function(e){function o(){var e=(c[0]||n[0]).clientWidth/s;n.tc("pc",e>=43).tc("tablet",43>e).tc("mobile",25>e)}var n=e.root,a=e.user.is_logged,i=e.design,r=t(window),l=(r.outerHeight(),"");n.rc("app-loading loading").tc("sso",e.is_sso).tc("no-title",!e.conf().show_title).tc("admin",e.user.is_admin).tc("logged",a).tc("no-logged",!a).tc("ie8",!!t.browser.msie&&9>t.browser.version).tc("webkit",!!t.browser.webkit||!!t.browser.chrome),i&&(n.addClass(i.classes),t.each(i.css,function(e,t){if("page"!=e||/moot.it/.test(location.host)){l+=moot.css[e]+"{"+t+"}";var o=st.exec(t);o&&moot.loadFont(o[1])}}),t("head").append(t("<style/>",{id:"moot-css",text:l})));var s=parseFloat(n.css("fontSize")),c=t(".m-wrap:eq(1)",n);r.resize(o),o(),r.one("load",o)}),moot(function(e,o){function n(){var o=t(this);moot.admin?(moot.admin(e,l),o.trigger("click")):(o.ac("loading"),t.getScript("//cdn.moot.it/1.9.7/admin.min.js",function(){o.rc("loading"),moot.admin(e,l),o.trigger("click")}))}var i=/.+@.+\..+/i,r=/^[^\<\>]{5,}$/,l=e.root,s=e.user,c=e.conf(),d=moot.language,u=t(".m-nav-account",l),m=t(p("account_overlay")).prependTo(l),f=t(".m-h2",m).text(s.displayname),h=t(".m-admin-area",l),v=t(".m-myname",u),b=t(".m-login",l),y=t(".m-me",u);if(!s.is_logged&&e.is_sso)return b.attr("href",c.login_url),c.login_url||b.remove(),void 0;m.active2({prefix:"m-",trigger:y},function(){var e=y.offset();m.offset({left:e.left+(c.rtl?0:y.outerWidth()-m.outerWidth()),top:e.top+y.outerHeight()+10})}),t(".m-status",m).each(function(){function e(){var e=s.is_visible;t("em",o).text(d[e?"online":"invisible"]),t("a",o).text(d[e?"hide":"show"]),o.tc("invisible",!e)}var o=t(this);t("a",o).click(function(){o.ac("loading"),s.hideToggle(function(){o.rc("loading"),e()})}),e()}),t(".m-unfollow",m).each(function(){var e=t(this);s.on("follow unfollow login",!0,function(){var o=s.subscription_count;e.toggle(o>0),t("em",e).text(o)}),t("a",e).click(function(){e.fadeOut(400),s.unfollowAll()})});var w=t(".m-face",m),k=t(".m-preview img, img[title='"+s.displayname+"']",l).add(w),x=t(".m-upload",m);y.one("click",function(){x.jsonrpc({api:"https://api.moot.it",method:"userUpdate",session:e.channel.session}).on("done",function(e,t){k.attr("src",t).rc("loading"),s.emit("update",{img:t})}),x.tooltip2({prefix:"m-"})}),t(":file",x).bind("change drop",function(e){t.each(e.target.files||[],function(e,t){if(t.type.match("image.*")&&15e5>t.size){var o=new FileReader;o.onload=function(e){k.attr("src",e.target.result)},o.readAsDataURL(t)}}),"change"==e.type&&t("button",x).click()}).bind("dragenter dragleave change",function(e){t(this).tc("hover",/enter/.test(e.type))}),t("form:gt(0)",m).each(function(){function e(){var e=t.trim(n.val()),o="email"==p?i:r;return e!=s[p]&&o.test(e)}var o=t(this),n=t("input",o),u=t("<button/>",{text:d.change,disabled:!0}).appendTo(o),p=n.attr("name");n.keyup(function(){var t=e();u.show().prop("disabled",!t),this.value==s[p]&&u.hide(),t&&o.rc("is-error")}),o.submit(function(i){if(!e())return!1;i.preventDefault(),o.ac("loading").rc("valid");var r={},m="email"==p,g=a(t.trim(n.val())),h=t(".m-name:contains('"+s.displayname+"')",l);r[p]=g,m&&(r.url=c.pageUrl),s.update(r,function(){if(o.rc("loading").ac("updated"),u.hide(),!m){var e=t("<span class='m-saved'>"+d.saved+"</span>").appendTo(o);setTimeout(function(){e.remove()},1e3),h.add(f).add(v).text(g)}}).fail(function(e){o.rc("loading").ac("is-error"),t(".m-error",o).text(/taken/.test(e)?d[p+"_taken"]:d.invalid)})})});var _=t(".m-maillist input").prop("checked",!!s.maillist).change(function(){s.update({maillist:!!this.checked},function(){_.parent().mootboost()})});t(".m-password a",m).click(function(){var o=t.extend({host:c.url.host,l:d.$code,rtl:c.rtl},e.channel.session);e.brand_logo&&(o.logo=e.brand_logo),e.brand_color&&(o.bgcolor=e.brand_color),g("https://moot.it/auth/1.9.7/password.html?"+t.param(o),300,380)}),t(".m-logout",m).click(function(){m.ac("loading"),s.logout()}),s.on("login join",s.is_logged,function(){if(w.add(t("img",y)).attr("src",s.img),v.add(f).text(s.displayname),t(".m-names strong",m).text(s.path),t.each(["displayname","email"],function(){t("[name='"+this+"']",m).val(s[this])}),_.prop("checked",!!s.maillist),l.tc("is-unverified",!!s.unverified),s.unverified){t(".m-page",l).prepend(p("unverified")).find(".m-unverified a").click(function(){t(".m-nav-account a").click()});var a=t("<p/>").ac("incomplete").html(d.unver3);t(".m-email .m-h3",m).append(t("<span/>").ac("badge").text(d.unver)).after(a),t("a",a).click(function(){s.sendValidationCode({forumname:e.name,url:c.pageUrl},function(){a.text(d.unver4)})})}if(s.is_admin&&e.is_forum){var i=t(".m-sidebar",l),r=t(".m-forums-title",i);t(".m-edit-cats",i)[0]||t("<a>"+d.edit+"</a>").ac("edit-cats").appendTo(r).one("click",n),h.html(p("admin")),t(".m-nav-settings",h).one("click",n);var u=e.products||[];t(".m-subs p",i).each(function(e){var o=t(this),a=o.attr("class").split("m-sub-")[1];o.tc("yup",0==e||t.inArray(a,u)>-1).one("click",n)}),2==u.length&&t(".m-subs",i).ac("has-all"),t(".m-nav-designer",h).click(function(n){n.preventDefault(),t("body").toggleClass("md-enabled"),t("#moot-designer")[0]||(t("head").append("<link href='//cdn.moot.it/1.9.7/designer.css' rel='stylesheet'>"),t("<div/>",{id:"moot-designer"}).appendTo("body").load("//cdn.moot.it/1.9.7/designer.html"),t.getScript("//cdn.moot.it/1.9.7/designer.min.js",function(){moot.designer(e,o)}))})}}).on("login logout",!0,function(){var e=s.is_logged;l.tc("logged",e).tc("no-logged",!e),m.rc("loading").trigger("close")}).on("logout",function(){h.empty(),t(".m-unverified, .m-incomplete, .m-edit-cats, .m-email .m-badge",l).remove()}),e.is_sso&&t(".m-h3, form, .m-password, .m-maillist",m).remove()}),moot(function(e){function o(){function o(o,n){return/invalid/.test(n)?(h.empty(),d.append(f),m.url=e.conf().pageUrl,delete m.path,"sendValidationCode"==o&&(m=m.url),u[o](m,function(){h.html(p("expired"))}).fail(function(e){h.html(p("confirm_error")),t(".m-h2",h).text(t.isArray(e)?e[0]:e)})):void 0}var i=(unescape(location.hash).split("!")[1]||"").split("/"),r=moot.language,l=i[0],s=i[1],c=i[2];if(!n&&/password|account|email/.test(l)&&a.test(c)&&s){n=!0;var d=e.root,u=e.user,m={confcode:s,email:c},f=t("<div class='m-mask'><div class='m-panel'/></div>"),h=t(".m-panel",f).append(p("confirm_"+l)),v=t(".m-h3",h);if(u.is_logged||(m.path=e.page.path),v.text()||v.text(c),f.on("click","button",function(){f.remove(),"localhost"!=location.hostname&&history.replaceState&&history.replaceState(null,null,"#")}),t(document).one("keydown",function(e){27==e.which&&f.remove()}),"password"==l)return u.is_logged?!0:u.checkResetCode(m,function(){m.id=m.email,delete m.email,d.append(f),t("button",f).click(function(){t.extend(m,{host:e.conf().url.host,l:r.$code,rtl:e.conf().rtl},e.channel.session),e.brand_logo&&(m.logo=e.brand_logo),e.brand_color&&(m.bgcolor=e.brand_color),g("https://moot.it/auth/1.9.7/forgot.html?"+t.param(m),300,270)})}).fail(function(e){m.id=m.email,delete m.email,o("resetPassword",e)});if("account"==l||u.is_logged){var b="account"==l;u[b?"confirmAccount":"confirmEmail"](m,function(){d.append(f),b?(d.rc("is-unverified"),t(".m-unverified",d).remove()):t(".m-email input",d).val(c)}).fail(function(e){o(b?"sendValidationCode":"update",e)})}else d.append(f),t(".m-h2",f).text(r.login1),t("button",f).click(function(){t(".m-login",d).click()});t(window).off("popstate.confirm")}}var n,a=/.+@.+\..+/i;t(window).on("popstate.confirm",o),setTimeout(o,t.browser.msie?500:0)}),moot(function(e){if(!e.is_sso){var o=/^[a-z0-9\-]{5,}$/i,n=window.localStorage||{},a=e.conf(),i=moot.language,r=e.user,l=e.root,s=t();l.on("click",".m-form button, .m-login, .m-like",function(o,l){if(!e.user.is_logged){var s={referrer:n["moot.referrer"],expand_all:!a.show_title,host:a.url.host,url:a.pageUrl,path:e.page.path,l:i.$code,rtl:a.rtl};return e.brand_logo&&(s.logo=e.brand_logo),e.brand_color&&(s.bgcolor=e.brand_color),l&&t.extend(s,l),(window.mootlogin||g)("https://moot.it/auth/1.9.7/?"+t.param(t.extend(s,e.channel.session)),360,430),r.one("login join",function(){var e=t(o.target).click();if(e.is("button")){var n=e.closest(".m-post");if(!n[0]){var a=e.closest(".m-moot");a[0]&&(n=t(".m-replies .m-reply:last",a))}b(n)}}),!1}}),r.on("login",function(e){e.user.join&&(s=t(p("join")).appendTo(l),t("button",s).click(function(){s.remove()}),r.emit("join",e))}),e.channel.on("join",function(n){function a(){d.prop("disabled",!f.is(":checked")||!m.parent().hc("ok"))}s.trigger("close");var c=t(p("social_join")).appendTo(l),d=t("button",c),u=n.user;t(".m-face",c).attr("src",u.img),t(".m-h2 span",c).text((u.name||u.displayname).split(" ")[0]),t(".m-terms a").attr({href:"https://moot.it/terms",target:"_new"});var m=t(":text",c).val(u.username).keyup(function(){var e=o.test(this.value),n=this.value.length;t(this).parent().tc("ok",e).tc("fail",n>3&&!e),a(),n>2&&m.next().text(i[e?"uname_len":"username_fail"])}),f=t(":checkbox",c).change(a);m.triggerHandler("keyup"),t("form",c).submit(function(){var t={secret:n.secret,username:m.val(),provider:n.provider,path:e.page.path};return r.join(t,function(){l.rc("is-join"),c.remove(),s.trigger("close")}).fail(function(e){/taken/.test(e)&&(m.parent().ac("is-error").rc("ok"),m.next().text(i.uname_taken))}),!1})})}}),t(function(){t(".moot[href]").moot(),t(".moot .moot-url[href]").each(function(){var e=t(this);e.closest(".moot").moot(e.remove().attr("href"))})}),t.fn.moot=function(e,o){return"string"==typeof e&&(e={url:e}),e=t.extend({show_title:!0},e),this.each(function(){var n,a=t(this),i=a.attr("href"),r=location.hash.split("#!")[1],l=a.data().pagetitle||document.title||t("title").text()||"",s=moot.language,c=t("<div class='m-loading-text'>"+s.loading+"</div>");if(i||(i=t(".moot-url",a).remove().attr("href")),t("*",a)[0]&&!t(".m-page",a)[0]&&(n=a.html()),t.extend(e,a.data()),t.extend(e,{mootTitle:a.attr("title"),pageTitle:l.slice(0,30*et)||"Untitled",url:(i||e.url).toLowerCase(),pageUrl:e.page_url||location.href.split("#")[0],rtl:"rtl"==t("html").attr("dir")}),r&&"/"==r[0]&&(e.path=unescape(r)),a.is("a")){var d=t("<div/>").attr({"class":a.attr("class"),"data-url":e.url});a.replaceWith(d),a=d}a.addClass("moot m-app-loading"),t("*",a)[0]||a.empty(),a.prepend(c);try{moot("error",function(e){"currentforum:invalid"==e&&a.html(s.badforum+': "'+this.name+'"')}),moot(e,function(e){e.html=n,e.root=a,t.isFunction(o)&&o.call(e,e),c.remove()})}catch(u){a.rc("app-loading"),/json-rpc/.test(u.message)&&a.ac("no-support").html(p("browser")).append('<img style="display:none" src="//oldbrowser.moot.it/'+escape(navigator.userAgent)+'">')}})}}(!this.top,jQuery),function(e){"use strict";function t(e,t){for(var o in t)e[o]=t[o];return e}function o(e,o){return t(t({},e),o)}function n(t,n,i){if(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;mark&gt;/g,"<mark>").replace(/&lt;\/mark&gt;/g,"</mark>"),!n)for(var r in a){var l=a[r].detect;if(l&&l.test(t)){n=r;break}}var s="",c=[],d=o(a.common,a[n]);for(var r in d){var u=d[r],p=r.split(",");u&&"detect"!=r&&t.replace(u,function(){for(var e,t,o,n,a=0,i=p.length,r=arguments;i>a;a++)e=p[a],t=i>1?1:0,o=r[a+t],n=r[i+t],4!=r.length||t||(o=r[1]||r[0],n=r[2]),a&&(n+=[].slice.call(r,1,a+1).join("").length),c.push([n,n+o.length,e])})}c=c.sort(function(e,t){return e[0]-t[0]});for(var m,f,g,h=0,v=0,b=0,y=c.length;y>v;v++)m=c[v],f=c[v-1]||[],g=c[v+1]||[],b>m[0]||m[0]==g[0]&&g[1]>m[1]||m[1]>b&&(b=m[1],s+=t.substring(h,m[0]),s+='<span class="'+(i||"")+m[2]+'">'+t.substring(m[0],m[1])+"</span>",h=m[1]);return s+=t.substring(h),e?s:"<pre class='"+i+"syntax "+i+(n||"common")+"'>"+s+"</pre>"}var a={common:{comment:/\/\*[^\*]*\*\/|\/\/.*$|\#\s.*\n/gm,string:/'[^']*'|"[^"]*"/g,keyword:/\b(none|true|false|and|array|catch|class|def|delete|echo|end|else|elseif|exit|extends|except|finally|for|foreach|global|if|import|local|module|new|object|or|package|print|private|protected|public|rescue|return|require|self|struct|static|sub|switch|then|this|throw|try|unsigned|var|while)\b/gi,operator:/\+|\!|%|\-|&lt;|&gt;|&amp;|;|:|\||\*|\=/g,bracket:/[{}\[\]\(\)]/g,number:/\b\d+\.?\d*\b/gi,accent1:/\b(boolean|const|void|char|short|int|integer|long|float|double|string)\b/g,"accent2,bracket":/\b(\w+)\s?(\()/gi},html:{operator:0,accent1:0,accent2:0,comment:/(&lt;\!--[^;]*--&gt;)/g,"bracket,accent1":/(&lt;\/?)(\w+)/g,keyword:/doctype/i,"accent2,operator":/([\w-]+)(=)/g,bracket:/&lt;|&gt;/g,detect:/^\s*&lt;/},java:{accent3:/@\w+\b/gi},js:{accent1:/\$|window|document|setTimeout|setInterval|console/g,accent3:/\/.+\/[igm]{0,3}/g,detect:/var\s*\w+\s*=/},css:{keyword:/none|inline|inline-block|block|rgba?|hsla?|solid|dotted/gi,"number,accent1":/(\d+\.*\d*)(px|em|rem|%)/gi,string:/#[a-f0-9]{3,6}/gi,accent1:/\s?([\-\w,\. \s#]+){\s?/gi,accent2:/\b([\-\w]+):\s?/gi,accent3:/\b(before|after|active|hover|focus)\b/gi},python:{accent3:/"""[\w\W]*"""/gm},ruby:{accent1:/\b(String|ArgumentError|puts|Thread|Errno::|Exception)\b/g,accent3:/[@:]\w+/g},markdown:{keyword:/[\*_].+[\*_]/gi,accent1:/#{1,2} .+/g,accent2:/#{3,} .+/g,accent3:/[- =]{3,}/g},sh:{accent1:/\b(echo|rm|ls|mkdir|rmdir|cd|find|cp|exit|pwd|exec|set|sed|awk)\b/g},php:{accent3:/\$\w+\b/g},perl:{"keyword,accent3":/\b(sub)\s*(\w+)\s*{/g},lua:{comment:/--.*\n/g},sql:{accent1:/\b(insert|into|create|table|update|select|from|where|values)\b/gi},redis:{accent1:/[A-Z]+/g}};a.javascript=a.js,a.stylus=a.css,a.yaml=a.markdown,a.shell=a.bash=a.sh,a.coffee=a.coffeescript=o(a.python,{accent1:a.js.accent1,accent2:/-&gt;/g,detect:/-&gt;/g}),a.django=a.jinja=o(a.html,{bracket:a.common.bracket,keyword:/\b(set|block|endblock|extends|if|endif)\b/g,accent3:/(\{\{.+\}\})/g}),a.markdown.comment=a.html.comment,a.css.detect=a.css.number,a.sql.comment=a.lua.comment,n.lang=a,e?module.exports=n:window.hilite2=n,"function"==typeof jQuery&&(jQuery.fn.hilite2=function(e){return this.each(function(){var t=jQuery(this);t.replaceWith(n(t.html(),t.attr("class"),e))})})}("object"==typeof exports),moot.language={$code:"en",no_title:"Title must be given",designer:"Designer",developer:"Developer",no_index:"Disable indexing under moot.it",mkpriv:"Make this forum private",sign:"This forum must be <a>signed</a> first.",s3:"Custom S3 bucket",s3_tip:"Allows custom domain for search engines and a backup storage.",s3_tip2:"Add full access permissions for <em>moot-aws@moot.it</em>",s3_no_access:"moot-aws@moot.it cannot access this bucket",s3_missing:"This bucket does not exist",banned:"Banned account",banned2:"You are temporarily banned from posting on this forum for violating forum policies. Time left:",banned4:"You can no longer post on this forum.",warning:"Warning",profanity:"Profanity is not allowed on this forum. Continued abuse of this policy will result in being banned.",img_needed:"Please upload an image file",max:"Maximum image size is 4Mb",yes:"Yes",upload:"Upload images",show:"show",hide:"hide",invisible:"Invisible",givebody:"Body cannot be empty.",show_old:"Show oldest replies",show_more:"Show more replies",show_new:"Show newest replies",start:"Start a new topic...",error:"Oops, an error. Please copy the post to clipboard, reload and try again. Sorry – we will fix this!",body:"Body text",admin:"Admin",someone:"Someone",title:"Title",writing:"is writing...",basic:"Basic (free)",subs:"Subscriptions",manage:"Manage",fullview:"Full view",link:"link",avatar:"Change avatar",seo_update:"The SEO pages will be updated within the hour",upgrade_link:"Upgrade",branding:"Branding",logo:"Logo",bgcolor:"Background color",brand_name:"Brand name",title:"Title",css:"CSS file",mootbrand:"Use Moot branding",sso:"Single Sign-On",apikey:"API key",apisecret:"Secret key",single:"single word",username_fail:"Use letters, numbers or dashes",bold:"bold",italics:"italics",monospaced:"monospaced",domain:"Forum URL",domaintip:"Full URL to the forums where users are pushed from the search results",learn:"Learn more...",ga:"Google Analytics Id",admins:"Administrators",adminstip:"One username per line",settings:"Settings",all:"All posts",anon_1:"anonymous",anon:"anonymous",badforum:"Invalid forum",c_acc1:"Your account now works on all sites using Moot",c_acc:"Account confirmed",c_email:"Email address updated",cancel:"Cancel",change:"Change",changepw:"Change password",close:"Close",collapse:"Collapse all",comm_count_1:"comment",comm_count_n:"comments",comment1:"Be the first to comment...",comment:"Comment...",edit:"edit",email:"Email",email_taken:"This email is taken",emailtip:"Your email is never shared",enter:"ctrl + enter",expired1:"We just sent you a new one. Please check your email.",expired:"This link has expired",feed:"My feed",forumname:"Forum name",forums:"Forums",help2:"post",help3:"quoted",help5:"code, language guessed",help6:"HTML code",in_forum:"in",invalid:"Invalid value",join:"Join Moot",later:"Later...",less:"less",like:"Like",likepost:"Like this post",loading:"Loading...",login:"Log in",login1:"Log in first",login_and:"Login and",logout:"Log out",mark:"Offensive or spam",mean:"Did you mean",name:"Display name",nametip:"Your real name, so people will recognize you",newcat:"New category",newpass:"New password",noresults:"No results for",nospam:"No spam on your forum!",notexist:"does not exist.",notify:"Notify me of new releases",ok:"ok",online:"Online",post:"Post",preview:"Preview",progress:["loading...","still working...","and working...","giving up"],reconnect:"Reconnecting...",removecat:"Remove. The posts are not removed",removepost:"Remove",reply:"Reply...",replybtn:"Reply",save:"Save changes",saved:"saved",search:"Search",select:"Select forum",setup:"Setup now",showing:"Showing",slogan:"Forums and commenting re-imagined",spam:"Spam",step1:"We have sent you a confirmation email. Your email is not updated before you complete this step!",step:"One more step",terms:"I agree to the <a>terms of service</a>.",thanks:"Thanks!",uname_len:"Type 6 characters or more",uname_taken:"This username is taken!",unametip:"This cannot be changed later",undo:"Undo",unlike:"Unlike",unspam:"Not spam",unver1:"Unverified account",unver2:"Please check your email to verify your account. Verified users can watch moots and receive email notifications. <a>Send a new verification code...</a>",unver3:"<a>Send a new</a> verification code to:",unver4:"Sent. Please check your inbox.",unver:"Unverified",unwall:"unwatch all",unwatch:"Unwatch",upgrade2:"Moot uses WebSockets or CORS for cross domain communication. All modern browsers above Opera 11 and IE7 work.",upgrade:"Please upgrade your browser",username_taken:"This username is taken",watch:"Watch for new replies",welcome1:"Please check your email to complete the registration. If you dont receive email within a minute or two, check your spam folder.",welcome2:"Please provide a Moot username",welcome:"Welcome to Moot",you:"You",now:"just now",months:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",min:"m",hour:"h",day:"d",week:"w"};})}();